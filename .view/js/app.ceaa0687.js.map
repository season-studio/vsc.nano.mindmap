{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?7e02","webpack:///./src/components/floatToolbar.vue?c9e2","webpack:///./src/App.vue?9ebe","webpack:///./src/components/floatToolbar.vue?c5fb","webpack:///src/components/floatToolbar.vue","webpack:///./src/components/floatToolbar.vue?a41b","webpack:///./src/components/floatToolbar.vue","webpack:///./src/js/xmind.js","webpack:///./src/js/fileFormator.js","webpack:///./src/js/toolsInfo.js","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///src/components/tipKit.vue","webpack:///./src/components/tipKit.vue?fa42","webpack:///./src/components/tipKit.vue","webpack:///./src/lang/lang.js","webpack:///./src/js/vscodeHost.js","webpack:///./src/main.js","webpack:///./src/js/hostAdapter.js","webpack:///./src/components/tipKit.vue?1101"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","draggable","showMenuContent","onNewWorkBook","onOpen","onSave","onUndo","onRedo","onStartSearch","on","onFocusTopicChanged","onBlurFloatPanel","onHistoryChanged","menuContent","$event","_v","_s","_T","requestInput","caption","directives","rawName","expression","tip","domProps","type","indexOf","_k","keyCode","stopPropagation","onInputConfirm","onInputCancel","target","composing","$set","_e","requestSearch","onSearchInputChange","onSearchNext","onSearchCancel","onSearchPrev","staticRenderFns","class","showContent","$emit","staticStyle","_l","item","index","itemClass","fn","nop","separate","svg","style","width","height","viewBox","html","subItems","subItem","subIdx","_t","component","constants","CLASSIC_ATTACHMENT_PATH","CLASSIC_CONTENT_FILE","CLASSIC_META_FILE","CLASSIC_COMMENTS_FILE","CLASSIC_MANIFEST_FILE","ZEN_RESOURCE_PATH","ZEN_MANIFEST_FILE","ZEN_META_FILE","ZEN_CONTENT_FILE","KEY_FILE_ENTRIES","XMindFile","attachments","comments","sheets","meta","_path","_data","path","_id","_objectID","_content","_author","_time","object_id","content","author","time","_sheet","_obj","assign","loadZenAttachments","_xmindFile","_zip","manifestEntry","file","async","manifestJSON","manifestDoc","JSON","parse","manifestList","attachmentFile","setAttachment","loadZenContent","contentEntry","contentJSON","contentDoc","setSheet","id","loadZenMeta","metaEntry","metaJSON","metaDoc","setMeta","loadZenEdition","xmindFile","console","error","undefined","xmlAttr2ObjectMember","_node","_maps","attachmentsPrefix","attachmentRegexpStr","zenAttachmentPrefix","attr","hasAttribute","String","getAttribute","startsWith","replace","RegExp","xmlChildren2ObjectMember","_undefinedParser","children","childNodes","tagName","parserFn","textContent","loadClassicAttachments","manifestXML","parser","DOMParser","parseFromString","documentElement","trim","endsWith","loadClassicComments","CommentsEntry","commentsXML","commentsDoc","commentsList","objectID","parseInt","Date","now","toString","contentItem","setComment","classicChildTopicParserMap","_list","_child","classicTopicParser","classicChildrenTopicsParserMap","_children","_itemNode","classicTopicParserMap","_topic","image","src","labels","_labels","_item","notes","_notes","_nodeItem","plain","markers","_markers","_marker","markerId","position","extensions","_extensions","extension","provider","_nouse","_contentNode","_childNode","topic","href","structureClass","classicRelationCtrlPointParserMap","_cpSet","amount","parseFloat","angle","classicRelationshipParserMap","_rel","controlPoints","classicRelationshipParser","_relList","_relNode","_relationship","end1Id","end2Id","classicSheetParserMap","rootTopic","relationships","loadClassicSheetItem","sheet","loadClassicSheets","sheetsEntry","sheetsXML","sheetsDoc","_null","_sheetNode","loadClassicMetadata","metaXML","_meta","creator","loadClassicEdition","load","_source","zipFunc","JSZip","loadAsync","base64","zip","save","manifest","entries","fileName","sheetId","stringify","generateAsync","createEmpty","getTopicIterator","getTopicIteratorFromMinds","freeze","NAME","VERSION","DEF_TOPIC_TYPE","genRandID","Math","random","substr","convertDataByMap","_target","_map","_args","parserArgs","Array","itemParser","xmindHtmlNotes2Plain","_html","_tag","ret","idx","xmindTopicDataMap","_storage","_value","markerList","markerIdx","markerItem","split","markerType","markerValue","fromXMindTopic","_extType","_tagret","title","direction","childrenType","topicType","childrenIdx","fromXMind","source","targetSheet","toXMindTopicDataMap","toXMindTopic","childrenSet","childIdx","childTopic","childTarget","childType","toXMind","_mind","idxSheet","sourceSheet","version","taskValues","fromKmTopicMap","text","resource","note","hyperlink","imageSize","priority","progress","fromKMTopic","_kmJson","childrenSource","childrenTarget","importKittyMind","_kmBlob","Promise","resolve","reader","FileReader","onload","e","extIdx","lastIndexOf","kmJson","newSheet","root","onerror","readAsText","toKmTopicMap","task","toKmTopic","kmTopic","exportKittyMind","km","template","theme","Blob","_topicList","_level","level","childTopicDesc","f","_minds","topicDesc","hostAdapter","onImportKM","onExportMarkdown","onExportKM","onSaveAs","onNewPage","onRenamePage","onDeletePage","execCmd","notForRoot","invokePropertyEditor","$refs","mindView","invokeImagePicker","mind","fold","showTip","_msg","_icon","_opt","require","DEFAULT_TIMEOUT","procResultMessage","_event","timerID","clearTimeout","removeEventListener","event","detail","waitTimeout","reject","VSCodeHost","_host","host","addEventListener","onMessage","message","$return","customEvent","CustomEvent","dispatchEvent","$notify","_cmd","_param","postMessage","command","_type","_timeout","thisArg","setTimeout","once","send","promise","acquireVsCodeApi","log","vscode","then","sendAndWait","env","translate","map","lang","language","appLang","finally","Vue","use","mindSvgView","tipKit","render","h","App","$mount","loadCurrentFile","buffer","Buffer","from","blob","saveFile","_blob","_params","readAsArrayBuffer","url","URL","createObjectURL","utility","dynInvokeLink","download","revokeObjectURL","saveFileAs","saveToFile","_filterName","_filter","_show","filter","openAfterSave","newFile","open","location","openFile","pickFile","noSpecialHost","setHost"],"mappings":"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","file":"js/app.ceaa0687.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/$vscode/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./floatToolbar.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./floatToolbar.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main\"},[_c('mind-svg-view',{ref:\"mindView\",attrs:{\"view-class\":\"mind-view-class\",\"mind-config\":{draggable: true},\"attachment-path\":\"resources\",\"show-edit-tools\":!_vm.showMenuContent,\"key-action-map\":{\n                'ctrl+alt+n': _vm.onNewWorkBook, \n                'ctrl+o': _vm.onOpen,\n                'ctrl+s': _vm.onSave,\n                'ctrl+down': 'addSubTopic', \n                'ctrl+right': 'addSiblingTopic',\n                'up': 'selectParent',\n                'down': 'selectChild',\n                'left': 'selectPreviousSibling',\n                'right': 'selectNextSibling',\n                'enter': 'editTopic',\n                'delete': 'deleteTopic',\n                'ctrl+z': _vm.onUndo,\n                'ctrl+y': _vm.onRedo,\n                'f3': _vm.onStartSearch\n        }},on:{\"focus-topic-changed\":_vm.onFocusTopicChanged,\"blur-float-panel\":_vm.onBlurFloatPanel,\"history-changed\":_vm.onHistoryChanged}}),_c('floatToolbar',{ref:\"toolbar\",attrs:{\"show-content\":_vm.showMenuContent,\"items\":_vm.menuContent},on:{\"handler-click\":function($event){_vm.showMenuContent = !_vm.showMenuContent}}},[(_vm.requestInput)?_c('div',{staticClass:\"mind-input-panel\"},[_c('span',[_vm._v(_vm._s(_vm._T(_vm.requestInput.caption)))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.requestInput.value),expression:\"requestInput.value\"}],attrs:{\"placeholder\":_vm._T(_vm.requestInput.tip)},domProps:{\"value\":(_vm.requestInput.value)},on:{\"keydown\":[function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }$event.stopPropagation();return _vm.onInputConfirm($event)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"])){ return null; }$event.stopPropagation();return _vm.onInputCancel($event)}],\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.requestInput, \"value\", $event.target.value)}}}),_c('button',{staticClass:\"mind-input-button\",on:{\"click\":_vm.onInputConfirm}},[_vm._v(_vm._s(_vm._T(\"Confirm\")))]),_c('button',{staticClass:\"mind-input-button\",on:{\"click\":_vm.onInputCancel}},[_vm._v(_vm._s(_vm._T(\"Cancel\")))])]):_vm._e(),(_vm.requestSearch)?_c('div',{staticClass:\"mind-input-panel\"},[_c('span',[_vm._v(_vm._s(_vm._T('search:')))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.requestSearch.value),expression:\"requestSearch.value\"}],attrs:{\"placeholder\":_vm._T('Input search information')},domProps:{\"value\":(_vm.requestSearch.value)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.requestSearch, \"value\", $event.target.value)},_vm.onSearchInputChange],\"keydown\":[function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }$event.stopPropagation();return _vm.onSearchNext($event)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"])){ return null; }$event.stopPropagation();return _vm.onSearchCancel($event)}]}}),_c('button',{staticClass:\"mind-input-button\",on:{\"click\":_vm.onSearchNext}},[_vm._v(_vm._s(_vm._T(\"Next\")))]),_c('button',{staticClass:\"mind-input-button\",on:{\"click\":_vm.onSearchPrev}},[_vm._v(_vm._s(_vm._T(\"Prev\")))]),_c('button',{staticClass:\"mind-input-button\",on:{\"click\":_vm.onSearchCancel}},[_vm._v(_vm._s(_vm._T(\"Cancel\")))])]):_vm._e()])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"float-toolbar\"},[_c('div',{class:(\"float-toolbar-handler \" + (_vm.showContent ? '' : 'float-toolbar-handler-nocontent')),on:{\"click\":function($event){return _vm.$emit('handler-click')}}},[_vm._v(\" \"+_vm._s(_vm._T(\"menu\"))+\" \"),(!_vm.showContent)?_c('div',{staticClass:\"float-icon-triangle float-icon-triangle-right\",staticStyle:{\"border-left-color\":\"#fff\"}}):_vm._e()]),(_vm.showContent)?_c('div',{staticClass:\"float-toolbar-content\"},_vm._l((_vm.items),function(item,index){return _c('div',{key:index,class:_vm.itemClass(item),on:{\"click\":function($event){item.fn ? item.fn(item) : _vm.nop()}}},[(!item.separate && item.svg)?_c('svg',{style:({width:((item.svg.width) + \"px\"), height:((item.svg.height) + \"px\")}),attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"version\":\"1.1\",\"viewBox\":item.svg.viewBox},domProps:{\"innerHTML\":_vm._s(item.svg.html)}}):_vm._e(),(!item.separate && !item.svg)?_c('span',{staticClass:\"float-toolbar-item-caption\",domProps:{\"innerHTML\":_vm._s(_vm._T(item.caption))}}):_vm._e(),(!item.separate && item.svg)?_c('span',{staticClass:\"float-toolbar-item-tip\"},[_vm._v(_vm._s(_vm._T(item.caption)))]):_vm._e(),(!item.separate && item.subItems)?_c('div',{staticClass:\"float-icon-triangle float-icon-triangle-down float-icon-triangle-color\"}):_vm._e(),(!item.separate && item.subItems)?_c('div',{staticClass:\"float-toolbar-subgroup\"},_vm._l((item.subItems),function(subItem,subIdx){return _c('div',{key:subIdx,class:_vm.itemClass(subItem, true),on:{\"click\":function($event){subItem.fn ? subItem.fn(subItem) : _vm.nop()}}},[_c('div',{staticClass:\"float-toolbar-item-caption\",style:(subItem.style),domProps:{\"innerHTML\":_vm._s(_vm._T(subItem.caption))}})])}),0):_vm._e()])}),0):_vm._e(),_c('div',[_vm._t(\"default\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"float-toolbar\">\r\n        <div :class=\"`float-toolbar-handler ${showContent ? '' : 'float-toolbar-handler-nocontent'}`\"\r\n            @click=\"$emit('handler-click')\" >\r\n            {{_T(\"menu\")}}\r\n            <div v-if=\"!showContent\" class=\"float-icon-triangle float-icon-triangle-right\" style=\"border-left-color: #fff;\" />\r\n        </div>\r\n        <div class=\"float-toolbar-content\" v-if=\"showContent\">\r\n            <div v-for=\"(item, index) in items\" :key=\"index\" \r\n                :class=\"itemClass(item)\"\r\n                @click=\"item.fn ? item.fn(item) : nop()\">\r\n                <svg v-if=\"!item.separate && item.svg\" xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" :viewBox=\"item.svg.viewBox\" :style=\"{width:`${item.svg.width}px`, height:`${item.svg.height}px`}\" v-html=\"item.svg.html\" />\r\n                <span v-if=\"!item.separate && !item.svg\" class=\"float-toolbar-item-caption\" v-html=\"_T(item.caption)\" />\r\n                <span v-if=\"!item.separate && item.svg\" class=\"float-toolbar-item-tip\">{{_T(item.caption)}}</span>\r\n                <div v-if=\"!item.separate && item.subItems\" class=\"float-icon-triangle float-icon-triangle-down float-icon-triangle-color\" />\r\n                <div v-if=\"!item.separate && item.subItems\" class=\"float-toolbar-subgroup\">\r\n                    <div v-for=\"(subItem, subIdx) in item.subItems\" :key=\"subIdx\" \r\n                        :class=\"itemClass(subItem, true)\"\r\n                        @click=\"subItem.fn ? subItem.fn(subItem) : nop()\">\r\n                        <div class=\"float-toolbar-item-caption\" v-html=\"_T(subItem.caption)\" :style=\"subItem.style\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div><slot></slot></div>\r\n    </div>    \r\n</template>\r\n\r\n<style>\r\n    .float-toolbar {\r\n        position: absolute;\r\n        top: 0px;\r\n        left: 0px;\r\n        margin: 17px;\r\n        background-color: transparent;\r\n        border: 0px;\r\n        border-radius: 6px;\r\n        box-shadow: 0px 0px 6px rgba(128, 128, 128, 0.6);\r\n        display: flex;\r\n        flex-direction: row;\r\n        flex-wrap: nowrap;\r\n        font-size: 13px;\r\n    }\r\n\r\n    .float-icon-triangle {\r\n        width: 0px;\r\n        height: 0px;\r\n        padding: 0px;\r\n        margin-left: 3px;\r\n        border: 0px solid #333;\r\n    }\r\n\r\n    .float-icon-triangle-right {\r\n        border-left-width: 10px;\r\n        border-top: 6px solid transparent;\r\n        border-bottom: 6px solid transparent;\r\n    }\r\n\r\n    .float-icon-triangle-down {\r\n        border-top-width: 10px;\r\n        border-left: 6px solid transparent;\r\n        border-right: 6px solid transparent;\r\n    }\r\n\r\n    .float-toolbar-handler {\r\n        padding: 6px;\r\n        background-color: rgba(46, 46, 46, 0.8);\r\n        color: #fff;\r\n        border: 0px;\r\n        border-radius: 6px 0px 0px 6px;\r\n        display: flex;\r\n        flex-direction: row;\r\n        justify-content: center;\r\n        align-items: center;\r\n        flex-wrap: nowrap;\r\n        white-space: nowrap;\r\n    }\r\n\r\n    .float-toolbar-handler-nocontent {\r\n        border-radius: 6px;\r\n    }\r\n\r\n    .float-toolbar-content {\r\n        padding: 0px 6px 0px 0px;\r\n        background-color: rgba(255, 255, 255, 0.6);\r\n        color: #000;\r\n        border: 0px;\r\n        border-radius: 0px 6px 6px 0px;\r\n        display: flex;\r\n        flex-direction: row;\r\n        flex-wrap: nowrap;\r\n        justify-content: center;\r\n        align-items: center;\r\n    }\r\n\r\n    .float-toolbar-content:hover {\r\n        background-color: rgba(255, 255, 255, 0.9);\r\n    }\r\n\r\n    .float-toolbar-plain-item {\r\n        position: relative;\r\n        padding: 6px;\r\n        height: 100%;\r\n        box-sizing: border-box;\r\n        justify-content: center;\r\n        align-items: center;\r\n        background-color: transparent; /* rgba(255, 255, 255, 0.6); */\r\n        font-size: 10px;\r\n        color: #333;\r\n        display: flex;\r\n        flex-direction: row;\r\n        flex-wrap: nowrap;\r\n    }\r\n\r\n    .float-toolbar-item {\r\n        position: relative;\r\n        padding: 6px;\r\n        height: 100%;\r\n        box-sizing: border-box;\r\n        justify-content: center;\r\n        align-items: center;\r\n        background-color: transparent;\r\n        font-size: 10px;\r\n        color: #333;\r\n        display: flex;\r\n        flex-direction: row;\r\n        flex-wrap: nowrap;\r\n        white-space: nowrap;\r\n        fill: none;\r\n        stroke: #333;\r\n        stroke-width: 1.5;\r\n    }\r\n\r\n    .float-toolbar-subitem {\r\n        height: unset;\r\n        width: 100%;\r\n        text-align: left;\r\n        justify-content: flex-start;\r\n    }\r\n\r\n    .float-toolbar-separate-item {\r\n        position: relative;\r\n        margin: 0px 1px;\r\n        padding: 0px;\r\n        width: 0px;\r\n        height: 20px;\r\n        box-sizing: border-box;\r\n        border: 0px;\r\n        border-left: 1px solid #ccc;\r\n        border-right: 1px solid #eee;\r\n    }\r\n\r\n    .float-toolbar-separate-subitem {\r\n        position: relative;\r\n        margin: 1px 0px;\r\n        padding: 0px;\r\n        width: 90%;\r\n        height: 0px;\r\n        box-sizing: border-box;\r\n        border: 0px;\r\n        border-top: 1px solid #ccc;\r\n        border-bottom: 1px solid #eee;\r\n    }\r\n\r\n    .float-toolbar-item-caption {\r\n        white-space: nowrap;\r\n    }\r\n\r\n    .float-toolbar-item-tip {\r\n        position: absolute;\r\n        padding: 6px;\r\n        box-sizing: border-box;\r\n        justify-content: center;\r\n        align-items: center;\r\n        background-color: rgba(255, 255, 220, 0.8);\r\n        font-size: 9px;\r\n        color: #333;\r\n        display: none;\r\n        white-space: nowrap;\r\n        border: 1px solid #999;\r\n        top: 100%;\r\n        left: 0px;\r\n    }\r\n\r\n    .float-toolbar-disable-item {\r\n        position: relative;\r\n        padding: 6px;\r\n        height: 100%;\r\n        box-sizing: border-box;\r\n        justify-content: center;\r\n        align-items: center;\r\n        background-color: transparent;\r\n        font-size: 10px;\r\n        color: #aaa;\r\n        display: flex;\r\n        flex-direction: row;\r\n        flex-wrap: nowrap;\r\n        fill: none;\r\n        stroke: #aaa;\r\n        stroke-width: 1.5;\r\n    }\r\n\r\n    .float-toolbar-subgroup {\r\n        position: absolute;\r\n        top: 100%;\r\n        left: 0px;\r\n        background-color: rgba(255, 255, 255, 0.9);\r\n        border: 0px;\r\n        border-radius: 0px 0px 6px 6px;\r\n        padding: 0px 0px 6px 0px;\r\n        box-shadow: 0px 0px 6px rgba(128, 128, 128, 0.6);\r\n        display: none;\r\n        flex-direction: column;\r\n        justify-content: center;\r\n        align-items: center;\r\n        z-index: 999;\r\n    }\r\n\r\n    .float-toolbar-item:hover {\r\n        background: linear-gradient(to top, rgba(0, 117, 255, 0.9) 26%,rgba(0, 157, 255, 0.9) 90%,rgba(0, 170, 255, 0.9) 100%);\r\n        color: #fff;\r\n        fill: none;\r\n        stroke: #fff;\r\n        stroke-width: 1.5;\r\n    }\r\n\r\n    .float-toolbar-item:hover .float-toolbar-subgroup {\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: center;\r\n        align-items: center;\r\n    }\r\n\r\n    .float-toolbar-item:hover .float-toolbar-item-tip {\r\n        display: inline;\r\n    }\r\n    \r\n    .float-toolbar-item:hover .float-icon-triangle-color {\r\n        border-top-color: #fff;\r\n    }\r\n\r\n    .float-toolbar-item:active {\r\n        background: linear-gradient(to top, rgba(0, 170, 255, 0.9) 26%,rgba(0, 157, 255, 0.9) 90%,rgba(0, 117, 255, 0.9) 100%);\r\n        color: #fff;\r\n        fill: none;\r\n        stroke: #fff;\r\n        stroke-width: 1.5;\r\n    }\r\n\r\n</style>\r\n\r\n<script>\r\n\r\nimport { translate } from \"mind.svg.vue\"\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            \r\n        }\r\n    },\r\n    props: {\r\n        showContent: Boolean,\r\n        items: {\r\n            type: Array,\r\n            required: true\r\n        }\r\n    },\r\n    methods: {\r\n        _T: translate.get,\r\n        nop() {},\r\n        log(_item) {\r\n            console.log(_item);\r\n        },\r\n        itemClass(_item, _subItem) {\r\n            return `${_item.separate ? `float-toolbar-separate-${_subItem ? \"subitem\" : \"item\"}`\r\n                        : (_item.disable ? 'float-toolbar-disable-item' \r\n                            : ((_item.fn || _item.subItems) ? 'float-toolbar-item' : 'float-toolbar-plain-item'))}\r\n                    ${_subItem ? \" float-toolbar-subitem\" : \"\"}`;\r\n        }\r\n    }\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./floatToolbar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./floatToolbar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./floatToolbar.vue?vue&type=template&id=4002af3a&\"\nimport script from \"./floatToolbar.vue?vue&type=script&lang=js&\"\nexport * from \"./floatToolbar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./floatToolbar.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import JSZip from \"jszip\";\r\n\r\n// 常量定义\r\nconst constants = {\r\n    CLASSIC_ATTACHMENT_PATH: \"attachments/\",\r\n    CLASSIC_CONTENT_FILE: \"content.xml\",\r\n    CLASSIC_META_FILE: \"meta.xml\",\r\n    CLASSIC_COMMENTS_FILE: \"comments.xml\",\r\n    CLASSIC_MANIFEST_FILE: \"META-INF/manifest.xml\",\r\n    ZEN_RESOURCE_PATH: \"resources/\",\r\n    ZEN_MANIFEST_FILE: \"manifest.json\",\r\n    ZEN_META_FILE: \"metadata.json\",\r\n    ZEN_CONTENT_FILE: \"content.json\",\r\n    KEY_FILE_ENTRIES: \"file-entries\"\r\n};\r\n\r\n// XMind文件对象\r\nclass XMindFile {\r\n    constructor () {\r\n        this.attachments = {};\r\n        this.comments = {};\r\n        this.sheets = {};\r\n        this.meta = {};\r\n    }\r\n\r\n    setAttachment (_path, _data) {\r\n        this.attachments[_path] = _data;\r\n    }\r\n\r\n    deleteAttachment (_path) {\r\n        if (this.attachments[_path]) {\r\n            delete this.attachments[_path];\r\n        }\r\n    }\r\n\r\n    * attachmentInterator() {\r\n        const attachments = this.attachments;\r\n        if (attachments) {\r\n            for (const path in attachments) {\r\n                yield { path, value: attachments[path] };\r\n            }\r\n        }\r\n    }\r\n\r\n    setComment (_id, _objectID, _content, _author, _time) {\r\n        this.comments[_id] = { object_id: _objectID, content: _content, author: _author, time: _time };\r\n    }\r\n\r\n    deleteComment (_id) {\r\n        if (this.comments[_id]) {\r\n            delete this.comments[_id];\r\n        }\r\n    }\r\n\r\n    setSheet (_id, _sheet) {\r\n        this.sheets[_id] = _sheet;\r\n    }\r\n\r\n    deleteSheet (_id) {\r\n        if (this.sheets[_id]) {\r\n            delete this.sheets[_id];\r\n        }\r\n    }\r\n\r\n    setMeta (_obj) {\r\n        Object.assign(this.meta, _obj);\r\n    }\r\n}\r\n\r\n// 加载zen模式下的附件文件\r\nasync function loadZenAttachments(_xmindFile, _zip) {\r\n    const manifestEntry = _zip.file(constants.ZEN_MANIFEST_FILE);\r\n    if (manifestEntry) {\r\n        const manifestJSON = await manifestEntry.async(\"text\");\r\n        const manifestDoc = JSON.parse(manifestJSON);\r\n        const manifestList = manifestDoc[constants.KEY_FILE_ENTRIES];\r\n        for (let item in manifestList) {\r\n            if (item.indexOf(\"/\") > 0) {\r\n                const attachmentFile = _zip.file(item);\r\n                if (attachmentFile) {\r\n                    const data = await attachmentFile.async(\"blob\");\r\n                    _xmindFile.setAttachment(item, data);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// 加载ZEN模式下的内容\r\nasync function loadZenContent(_xmindFile, _zip) {\r\n    const contentEntry = _zip.file(constants.ZEN_CONTENT_FILE);\r\n    if (contentEntry) {\r\n        const contentJSON = await contentEntry.async(\"text\");\r\n        const contentDoc = JSON.parse(contentJSON);\r\n        for (let item of contentDoc) {\r\n            _xmindFile.setSheet(item.id, item);\r\n        }\r\n    }\r\n}\r\n\r\n// 加载Zen模式下的元数据\r\nasync function loadZenMeta(_xmindFile, _zip) {\r\n    const metaEntry = _zip.file(constants.ZEN_META_FILE);\r\n    if (metaEntry) {\r\n        const metaJSON = await metaEntry.async(\"text\");\r\n        const metaDoc = JSON.parse(metaJSON);\r\n        delete metaDoc[\"activeSheetId\"];\r\n        _xmindFile.setMeta(metaDoc);\r\n    }\r\n}\r\n\r\n// 加载ZEN版本的xmind文件\r\nasync function loadZenEdition(_zip) {\r\n    let xmindFile = new XMindFile();\r\n    try {\r\n        await loadZenAttachments(xmindFile, _zip);\r\n        await loadZenContent(xmindFile, _zip);\r\n        await loadZenMeta(xmindFile, _zip);\r\n    } catch (error) {\r\n        console.error(error);\r\n        xmindFile = undefined;\r\n    }\r\n    return xmindFile;\r\n}\r\n\r\n// 将XML标签的属性转为对象内的成员\r\nfunction xmlAttr2ObjectMember(_obj, _node, _maps) {\r\n    const attachmentsPrefix = `xap:${constants.CLASSIC_ATTACHMENT_PATH}`;\r\n    const attachmentRegexpStr = `^xap:${constants.CLASSIC_ATTACHMENT_PATH}`;\r\n    const zenAttachmentPrefix = `xap:${constants.ZEN_RESOURCE_PATH}`;\r\n    for (let item in _maps) {\r\n        let attr = _maps[item];\r\n        let fn = undefined;\r\n        if (attr.fn) {\r\n            fn = attr.fn;\r\n            attr = attr.n;\r\n        }\r\n        if (_node.hasAttribute(attr)) {\r\n            let value = String(_node.getAttribute(attr));\r\n            if (fn) {\r\n                value = fn(value);\r\n            }\r\n            if ((attr.indexOf(\":\") > 0) && (typeof value === \"string\") && (value.startsWith(attachmentsPrefix))) {\r\n                value = value.replace(new RegExp(attachmentRegexpStr), zenAttachmentPrefix);\r\n            }\r\n            _obj[item] = value;\r\n        }\r\n    }\r\n    return _obj;\r\n}\r\n\r\n// 将XML标签的成员转为对象的成员\r\nfunction xmlChildren2ObjectMember(_obj, _node, _maps, _undefinedParser) {\r\n    const children = _node.childNodes;\r\n    for (let item of children) {\r\n        const tagName = item.tagName;\r\n        const parserFn = _maps[tagName];\r\n        if (parserFn) {\r\n            if (typeof parserFn === \"string\") {\r\n                _obj[parserFn] = item.textContent;\r\n            } else {\r\n                parserFn(_obj, item);\r\n            }\r\n        } else if (_undefinedParser) {\r\n            _undefinedParser(_obj, item);\r\n        }\r\n    }\r\n    return _obj;\r\n}\r\n\r\n// 加载传统模式的附件内容\r\nasync function loadClassicAttachments(_xmindFile, _zip) {\r\n    const manifestEntry = _zip.file(constants.CLASSIC_MANIFEST_FILE);\r\n    const attachmentRegexpStr = `^${constants.CLASSIC_ATTACHMENT_PATH}`;\r\n    if (manifestEntry) {\r\n        const manifestXML = await manifestEntry.async(\"text\");\r\n        const parser = new DOMParser();\r\n        const manifestDoc = parser.parseFromString(manifestXML, \"text/xml\");\r\n        const manifestList = manifestDoc.documentElement.childNodes;\r\n        for (let item of manifestList) {\r\n            if (item.hasAttribute(\"full-path\")) {\r\n                let path = item.getAttribute(\"full-path\").trim();\r\n                if ((!path.endsWith(\"/\")) && path.startsWith(constants.CLASSIC_ATTACHMENT_PATH)) {\r\n                    const attachmentFile = _zip.file(path);\r\n                    if (attachmentFile) {\r\n                        path = path.replace(new RegExp(attachmentRegexpStr), constants.ZEN_RESOURCE_PATH);\r\n                        const data = await attachmentFile.async(\"blob\");\r\n                        _xmindFile.setAttachment(path, data);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// 加载传统模式的批注内容\r\nasync function loadClassicComments(_xmindFile, _zip) {\r\n    const CommentsEntry = _zip.file(constants.CLASSIC_COMMENTS_FILE);\r\n    if (CommentsEntry) {\r\n        const commentsXML = await CommentsEntry.async(\"text\");\r\n        const parser = new DOMParser();\r\n        const commentsDoc = parser.parseFromString(commentsXML, \"text/xml\");\r\n        const commentsList = commentsDoc.documentElement.childNodes;\r\n        for (let item of commentsList) {\r\n            const id = (item.getAttribute(\"id\") || \"\").trim();\r\n            const objectID = (item.getAttribute(\"object-id\") || \"\").trim();\r\n            const author = (item.getAttribute(\"author\") || \"\").trim();\r\n            const time = parseInt((item.getAttribute(\"time\") || Date.now().toString()).trim());\r\n            let content = \"\";\r\n            for (let contentItem of item.childNodes) {\r\n                if (contentItem.tagName === \"content\") {\r\n                    content += contentItem.textContent;\r\n                }\r\n            }\r\n            _xmindFile.setComment(id, objectID, content, author, time);\r\n        }\r\n    }\r\n}\r\n\r\n// 传统模式的子主题解析映射表\r\nconst classicChildTopicParserMap = {\r\n    \"topic\": (_list, _child) => {\r\n        _list.push(classicTopicParser(_child));\r\n    }\r\n};\r\n\r\n// 传统模式的子主题集的解析映射表\r\nconst classicChildrenTopicsParserMap = {\r\n    \"topics\": (_children, _itemNode) => {\r\n        const type = _itemNode.getAttribute(\"type\");\r\n        if (!_children[type]) {\r\n            _children[type] = [];\r\n        }\r\n        xmlChildren2ObjectMember(_children[type], _itemNode, classicChildTopicParserMap);\r\n    }\r\n}\r\n\r\n// 传统模式的主题内项的解析映射表\r\nconst classicTopicParserMap = {\r\n    \"title\": \"title\",\r\n    \"children\": (_topic, _node) => {\r\n        _topic.children = xmlChildren2ObjectMember({}, _node, classicChildrenTopicsParserMap);\r\n    },\r\n    \"xhtml:img\": (_topic, _node) => {\r\n        _topic.image = xmlAttr2ObjectMember({}, _node, {\r\n            src: \"xhtml:src\",\r\n            width: { n: \"svg:width\", fn: parseInt },\r\n            height: { n: \"svg:height\", fn: parseInt }\r\n        });\r\n    },\r\n    \"labels\": (_topic, _node) => {\r\n        _topic.labels = xmlChildren2ObjectMember([], _node, {\r\n            \"label\": (_labels, _item) => {\r\n                _labels.push(String(_item.textContent));\r\n            }\r\n        })\r\n    },\r\n    \"notes\": (_topic, _node) => {\r\n        _topic.notes = xmlChildren2ObjectMember({}, _node, {}, (_notes, _nodeItem) => {\r\n            if (_notes.plain && _notes.plain.content) {\r\n                _notes.plain.content += `\\r\\n${_nodeItem.textContent}`;\r\n            } else {\r\n                _notes.plain = { content: _nodeItem.textContent };\r\n            }\r\n        });\r\n    },\r\n    \"marker-refs\": (_topic, _node) => {\r\n        _topic.markers = xmlChildren2ObjectMember([], _node, {}, (_markers, _marker) => {\r\n            _markers.push(xmlAttr2ObjectMember({}, _marker, { markerId: \"marker-id\" }));\r\n        });\r\n    },\r\n    \"position\": (_topic, _node) => {\r\n        _topic.position = xmlAttr2ObjectMember({}, _node, {\r\n            \"x\": { n: \"svg:x\", fn: parseInt},\r\n            \"y\": { n: \"svg:y\", fn: parseInt}\r\n        })\r\n    },\r\n    \"extensions\": (_topic, _node) => {\r\n        _topic.extensions = xmlChildren2ObjectMember([], _node, {\r\n            \"extension\": (_extensions, _itemNode) => {\r\n                let extension = xmlAttr2ObjectMember({}, _itemNode, {\r\n                    provider: \"provider\"\r\n                });\r\n                extension.content = [];\r\n                xmlChildren2ObjectMember(null, _itemNode, {\r\n                    \"content\": (_nouse, _contentNode) => {\r\n                        xmlChildren2ObjectMember(extension.content, _contentNode, {}, (_list, _childNode) => {\r\n                            _list.push({\r\n                                name: _childNode.tagName,\r\n                                content: _childNode.textContent\r\n                            })\r\n                        });\r\n                    }\r\n                })\r\n                _extensions.push(extension);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n// 传统模式的主题解析处理\r\nfunction classicTopicParser(_node) {\r\n    let topic = xmlAttr2ObjectMember({}, _node, {\r\n        id: \"id\",\r\n        href: \"xlink:href\",\r\n        structureClass: \"structure-class\"\r\n    });\r\n    xmlChildren2ObjectMember(topic, _node, classicTopicParserMap);\r\n    if (!topic.children) {\r\n        topic.children = {};\r\n    }\r\n    return topic;\r\n}\r\n\r\n// 传统模式的关系控制点的解析映射表\r\nconst classicRelationCtrlPointParserMap = {\r\n    \"control-point\": (_cpSet, _node) => {\r\n        const index = String(_node.getAttribute(\"index\"));\r\n        _cpSet[index] = xmlAttr2ObjectMember({}, _node, {\r\n            amount: { n: \"amount\", fn: parseFloat },\r\n            angle: { n: \"angle\", fn: parseFloat }\r\n        });\r\n    }\r\n}\r\n\r\n// 传统模式的关系项的解析映射表\r\nconst classicRelationshipParserMap = {\r\n    \"title\": \"title\",\r\n    \"control-points\": (_rel, _node) => {\r\n        _rel.controlPoints = xmlChildren2ObjectMember({}, _node, classicRelationCtrlPointParserMap);\r\n    }\r\n}\r\n\r\n// 传统模式的关系项的解析处理函数\r\nfunction classicRelationshipParser(_relList, _relNode) {\r\n    let _relationship = xmlAttr2ObjectMember({}, _relNode, {\r\n        id: \"id\",\r\n        end1Id: \"end1\",\r\n        end2Id: \"end2\"\r\n    });\r\n    xmlChildren2ObjectMember(_relationship, _relNode, classicRelationshipParserMap);\r\n    _relList.push(_relationship);\r\n}\r\n\r\n// 传统模式的工作表内项的解析映射表\r\nconst classicSheetParserMap = {\r\n    \"topic\": (_sheet, _node) => {\r\n        _sheet.rootTopic = classicTopicParser(_node);\r\n    },\r\n    \"title\": \"title\",\r\n    \"relationships\": (_sheet, _node) => {\r\n        _sheet.relationships = xmlChildren2ObjectMember([], _node, {\r\n            \"relationship\": classicRelationshipParser\r\n        });\r\n    }\r\n};\r\n\r\n// 加载传统模式的工作表\r\nfunction loadClassicSheetItem(_xmindFile, _zip, _node) {\r\n    let sheet = xmlAttr2ObjectMember({}, _node, {\r\n        id: \"id\"\r\n    });\r\n    xmlChildren2ObjectMember(sheet, _node, classicSheetParserMap);\r\n    return sheet;\r\n}\r\n\r\n// 加载传统模式的工作表集合\r\nasync function loadClassicSheets(_xmindFile, _zip) {\r\n    const sheetsEntry = _zip.file(constants.CLASSIC_CONTENT_FILE);\r\n    if (sheetsEntry) {\r\n        const sheetsXML = await sheetsEntry.async(\"text\");\r\n        const parser = new DOMParser();\r\n        const sheetsDoc = parser.parseFromString(sheetsXML, \"text/xml\");\r\n        xmlChildren2ObjectMember(null, sheetsDoc.documentElement, {\r\n            \"sheet\": (_null, _sheetNode) => {\r\n                const sheet = loadClassicSheetItem(_xmindFile, _zip, _sheetNode);\r\n                _xmindFile.setSheet(sheet.id, sheet);\r\n            } \r\n        })\r\n    }\r\n}\r\n\r\n// 加载传统模式的元数据\r\nasync function loadClassicMetadata(_xmindFile, _zip) {\r\n    const metaEntry = _zip.file(constants.CLASSIC_META_FILE);\r\n    if (metaEntry) {\r\n        const metaXML = await metaEntry.async(\"text\");\r\n        const parser = new DOMParser();\r\n        const metaDoc = parser.parseFromString(metaXML, \"text/xml\");\r\n        let meta = xmlChildren2ObjectMember({}, metaDoc.documentElement, {\r\n            \"Creator\": (_meta, _node) => {\r\n                _meta.creator = xmlChildren2ObjectMember({}, _node, {\r\n                    \"Name\": \"name\",\r\n                    \"Version\": \"version\"\r\n                });\r\n            } \r\n        });\r\n\r\n        _xmindFile.setMeta(meta);\r\n    }\r\n}\r\n\r\n// 加载传统模式的文件版本\r\nasync function loadClassicEdition(_zip) {\r\n    let xmindFile = new XMindFile();\r\n    try {\r\n        await loadClassicAttachments(xmindFile, _zip);\r\n        await loadClassicComments(xmindFile, _zip);\r\n        await loadClassicSheets(xmindFile, _zip);\r\n        await loadClassicMetadata(xmindFile, _zip);\r\n\r\n    } catch (error) {\r\n        console.error(error);\r\n        xmindFile = undefined;\r\n    }\r\n    return xmindFile;\r\n}\r\n\r\n// 从源数据加载xmind文件内容\r\nexport async function load(_source) {\r\n    let xmindFile = undefined;\r\n    try {\r\n        let zipFunc = new JSZip();\r\n        let zip = await zipFunc.loadAsync(_source, { base64: typeof _source === \"string\" });\r\n        if (zip.file(constants.ZEN_CONTENT_FILE)) {\r\n            xmindFile = await loadZenEdition(zip);\r\n        } else if (zip.file(constants.CLASSIC_CONTENT_FILE)) {\r\n            xmindFile = await loadClassicEdition(zip);\r\n        }\r\n    } catch (error) {\r\n        console.error(error);\r\n        xmindFile = undefined;\r\n    }\r\n\r\n    return xmindFile;\r\n}\r\n\r\n// 将xmind对象保存到一个文件中去\r\nexport async function save(_xmindFile) {\r\n    if (_xmindFile instanceof XMindFile) {\r\n        const zip = new JSZip();\r\n        const manifest = {};\r\n        const entries = (manifest[constants.KEY_FILE_ENTRIES] = {});\r\n        // 保存附件\r\n        const attachments = _xmindFile.attachments;\r\n        if (attachments) {\r\n            for (let fileName in attachments) {\r\n                const data = attachments[fileName];\r\n                if (data) {\r\n                    zip.file(fileName.replace(constants.CLASSIC_ATTACHMENT_PATH, constants.ZEN_RESOURCE_PATH), data);\r\n                    entries[fileName] = {};\r\n                }\r\n            }\r\n        }\r\n        // 保存元数据\r\n        zip.file(constants.ZEN_META_FILE, JSON.stringify(_xmindFile.meta));\r\n        entries[constants.ZEN_META_FILE] = {};\r\n        const content = [];\r\n        const sheets = _xmindFile.sheets;\r\n        for (let sheetId in sheets) {\r\n            content.push(sheets[sheetId]);\r\n        }\r\n        // 保存内容\r\n        zip.file(constants.ZEN_CONTENT_FILE, JSON.stringify(content));\r\n        entries[constants.ZEN_CONTENT_FILE] = {};\r\n        // 保存manifest\r\n        zip.file(constants.ZEN_MANIFEST_FILE, JSON.stringify(manifest));\r\n        return await zip.generateAsync({type:\"blob\"});\r\n    } else {\r\n        return undefined;\r\n    }\r\n}\r\n\r\n// 创建一个空的对象\r\nexport function createEmpty() {\r\n    return new XMindFile();\r\n}\r\n","// 常量信息\r\nexport const constants = Object.freeze({\r\n    NAME: \"mind.svg.js\",\r\n    VERSION: \"0.1.0.202006\",\r\n    DEF_TOPIC_TYPE: \"attached\"\r\n});\r\n\r\n// 获取随机id号\r\nfunction genRandID() {\r\n    return `${Date.now()}${Math.random().toString(16).substr(2, 3)}`;\r\n}\r\n\r\n// 转换根据映射表来转换\r\nfunction convertDataByMap(_target, _source, _map, _args) {\r\n    const parserArgs = (_args instanceof Array) ? [_target, undefined, ..._args] : [_target, undefined];\r\n    for (let item in _map) {\r\n        const itemParser = _map[item];\r\n        const value = _source[item];\r\n        if (value !== undefined) {\r\n            if (typeof itemParser === \"string\") {\r\n                _target[itemParser] = value;\r\n            } else if (typeof itemParser === \"function\") {\r\n                parserArgs[1] = value;\r\n                itemParser.apply(_source, parserArgs);\r\n            } else {\r\n                _target[item] = value;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n//#region XMIND格式转换\r\n\r\n// 将XMind的HTML格式化备注转为纯文本备注\r\nfunction xmindHtmlNotes2Plain(_html, _tag) {\r\n    let ret;\r\n    if (_tag === \"text\") {\r\n        ret = _html + \"\\r\\n\";\r\n    } else if (_html && (typeof _html === \"object\")) {\r\n        ret = \"\";\r\n        for (let idx in _html) {\r\n            ret += xmindHtmlNotes2Plain(_html[idx], idx);\r\n        }\r\n    } else {\r\n        ret = \"\";\r\n    }\r\n    return ret;\r\n}\r\n\r\n// XMIND主题附属数据解析映射表\r\nconst xmindTopicDataMap = {\r\n    labels: null,\r\n    href: null,\r\n    image: null,\r\n    markers: (_storage, _value) => {\r\n        const markerList = (_storage.markers = {});\r\n        for (let markerIdx in _value) {\r\n            const markerItem = _value[markerIdx];\r\n            const {0:markerType, 1:markerValue} = String(markerItem.markerId).split(\"-\");\r\n            markerList[markerType] = markerValue;\r\n        }\r\n    },\r\n    notes: (_storage, _value) => {\r\n        let data = ((_value.plain && _value.plain.content) ? _value.plain.content : \"\") \r\n                    + xmindHtmlNotes2Plain(_value.html, null);\r\n        _storage.notes = data;\r\n    }\r\n}\r\n\r\n// 转换XMind的主题\r\nfunction fromXMindTopic(_xmindFile, _topic, _extType) {\r\n    let _tagret = {\r\n        id: _topic.id,\r\n        title: _topic.title,\r\n        direction: _topic.direction,\r\n        children: [],\r\n    };\r\n    // 转换主题附属数据\r\n    convertDataByMap(_tagret, _topic, xmindTopicDataMap, [_xmindFile]);\r\n    // 等级主题的扩展类型\r\n    if (_extType !== undefined) {\r\n        _tagret.topicType = _extType;\r\n    }\r\n    // 转换子主题\r\n    for (let childrenType in _topic.children) {\r\n        const children = _topic.children[childrenType];\r\n        for (let childrenIdx in children) {\r\n            _tagret.children.push(fromXMindTopic(_xmindFile, children[childrenIdx], childrenType));\r\n        }\r\n    }\r\n    return _tagret;\r\n}\r\n\r\n// 从XMind对象加载MIND信息\r\nexport function fromXMind(_xmindFile) {\r\n    try {\r\n        let sheets = [];\r\n        const source = _xmindFile.sheets;\r\n        for (let sheetId in source) {\r\n            const sheet = source[sheetId];\r\n            let targetSheet = {\r\n                id: sheet.id,\r\n                title: sheet.title,\r\n                relationships: sheet.relationships || [],\r\n                topic: fromXMindTopic(_xmindFile, sheet.rootTopic)\r\n            };\r\n            sheets.push(targetSheet);\r\n        }\r\n        return sheets;\r\n    } catch (error) {\r\n        console.error(error);\r\n        return undefined;\r\n    }\r\n}\r\n\r\n// XMIND主题附属数据逆转换映射表\r\nconst toXMindTopicDataMap = {\r\n    labels: null,\r\n    href: null,\r\n    image: null,\r\n    markers: (_topic, _value) => {\r\n        const markerList = (_topic.markers = []);\r\n        for (const markerType in _value) {\r\n            const markerValue = _value[markerType];\r\n            markerList.push({markerId: `${markerType}-${markerValue}`});\r\n        }\r\n    },\r\n    notes: (_topic, _value) => {\r\n        _topic.notes = {\r\n            plain: {\r\n                content: _value\r\n            }\r\n        };\r\n    }\r\n}\r\n\r\n// 转换为XMind主题格式\r\nfunction toXMindTopic(_topic, _xmindFile) {\r\n    let target = {\r\n        id: _topic.id,\r\n        title: _topic.title,\r\n        direction: _topic.direction,\r\n        children: {}\r\n    };\r\n    // 转换主题的附属数据\r\n    convertDataByMap(target, _topic, toXMindTopicDataMap, [_xmindFile]);\r\n    // 添加子主题\r\n    const childrenSet = target.children;\r\n    if (_topic.children) {\r\n        const children = _topic.children;\r\n        for (let childIdx in children) {\r\n            const childTopic = children[childIdx];\r\n            const childTarget = toXMindTopic(childTopic, _xmindFile);\r\n            const childType = (childTopic.topicType || constants.DEF_TOPIC_TYPE);\r\n            (childrenSet[childType] || (childrenSet[childType] = [])).push(childTarget);\r\n        }\r\n    }\r\n    return target;\r\n}\r\n\r\n// 将导图数据转化为XMIND格式对象\r\nexport function toXMind(_mind, _xmindFile) {\r\n    try {\r\n        // 添加画布\r\n        for (let idxSheet in _mind) {\r\n            const sourceSheet = _mind[idxSheet];\r\n            let sheet = {\r\n                id: sourceSheet.id,\r\n                title: sourceSheet.title,\r\n                relationships: /* sourceSheet.relationships || */ [],\r\n                rootTopic: toXMindTopic(sourceSheet.topic, _xmindFile)\r\n            };\r\n            _xmindFile.setSheet(sheet.id, sheet);\r\n        }\r\n        // 设置元数据\r\n        _xmindFile.setMeta({creator:{\r\n            name: constants.NAME,\r\n            version: constants.VERSION\r\n        }});\r\n        return _xmindFile;\r\n    } catch (error) {\r\n        console.error(error);\r\n        return undefined;\r\n    }\r\n}\r\n\r\n//#endregion\r\n\r\n//#region KittyMind格式转换\r\n\r\n// 任务进度值列表\r\nconst taskValues = [\"start\", \"oct\", \"quarter\", \"3oct\", \"half\", \"5oct\", \"3quar\", \"7oct\", \"done\"];\r\n\r\n// 从KM导入的转化映射表\r\nconst fromKmTopicMap = {\r\n    id: null,\r\n    text: \"title\",\r\n    resource: \"labels\",\r\n    note: \"notes\",\r\n    hyperlink: \"href\",\r\n    image: function (_storage, _value) {\r\n        _storage[\"image\"] = Object.assign({src:_value}, this.imageSize);\r\n    },\r\n    priority: function (_storage, _value) {\r\n        const markers = (_storage.markers || (_storage.markers = {}));\r\n        markers[\"priority\"] = _value;\r\n    },\r\n    progress: function (_storage, _value) {\r\n        const markers = (_storage.markers || (_storage.markers = {}));\r\n        markers[\"task\"] = taskValues[parseInt(_value) - 1] || \"task-unknown\";\r\n    }\r\n}\r\n\r\n// 从KM主题信息中转换出主题内容\r\nfunction fromKMTopic(_kmJson) {\r\n    const topic = {};\r\n    convertDataByMap(topic, _kmJson.data, fromKmTopicMap);\r\n    const childrenSource = _kmJson.children;\r\n    if ((childrenSource instanceof Array) && (childrenSource.length > 0)) {\r\n        const childrenTarget = (topic.children = []);\r\n        for (let idx in childrenSource) {\r\n            childrenTarget.push(fromKMTopic(childrenSource[idx]));\r\n        }\r\n    }\r\n    return topic;\r\n}\r\n\r\n// 导入KM主题页\r\nexport function importKittyMind(_kmBlob) {\r\n    return new Promise(resolve => {\r\n        const reader = new FileReader();\r\n        reader.onload = (e) => {\r\n            try {\r\n                const name = String(_kmBlob.name);\r\n                const extIdx = name.lastIndexOf(\".\");\r\n                const title = name ? ((extIdx > 0) ? name.substr(0, extIdx) : name) : `page-${genRandID()}`;\r\n                const kmJson = JSON.parse(e.target.result);\r\n                const newSheet = {\r\n                    id: genRandID(),\r\n                    title,\r\n                    relationships: [],\r\n                    topic: fromKMTopic(kmJson.root)\r\n                };\r\n                resolve(newSheet);\r\n            } catch (error) {\r\n                console.error(error);\r\n                resolve(undefined);\r\n            }\r\n        };\r\n        reader.onerror = () => resolve(undefined);\r\n        reader.readAsText(_kmBlob);\r\n    });\r\n}\r\n\r\n// 导出KM的转化映射表\r\nconst toKmTopicMap = {\r\n    id: null,\r\n    title: \"text\",\r\n    labels: \"resource\",\r\n    notes: \"note\",\r\n    href: \"hyperlink\",\r\n    image: function (_storage, _value) {\r\n        _storage[\"image\"] = _value.src;\r\n        _storage[\"imageSize\"] = {width: _value.width, height: _value.height};\r\n    },\r\n    markers: function (_storage, _value) {\r\n        if (_value.priority) {\r\n            _storage[\"priority\"] = parseInt(_value.priority);\r\n        }\r\n        if (_value.task) {\r\n            const idx = taskValues.indexOf(_value.task) + 1;\r\n            idx && (_storage[\"progress\"] = idx);\r\n        }\r\n    }\r\n}\r\n\r\n// 将主题转换为KM格式\r\nfunction toKmTopic(_topic) {\r\n    const kmTopic = { data: {}, children: [] };\r\n    convertDataByMap(kmTopic.data, _topic, toKmTopicMap);\r\n    const childrenSource = _topic.children;\r\n    if ((childrenSource instanceof Array) && (childrenSource.length > 0)) {\r\n        const childrenTarget = kmTopic.children;\r\n        for (let idx in childrenSource) {\r\n            childrenTarget.push(toKmTopic(childrenSource[idx]));\r\n        }\r\n    }\r\n    return kmTopic;\r\n}\r\n\r\n// 导出一个页面为KM格式\r\nexport function exportKittyMind(_sheet) {\r\n    const km = {\r\n        template: \"default\",\r\n        theme: \"fresh-blue\",\r\n        version: \"1.4.43\",\r\n        root: toKmTopic(_sheet.topic)\r\n    };\r\n    return new Blob([JSON.stringify(km)]);\r\n}\r\n//#endregion\r\n\r\n// 从主题数组中获取主题迭代器\r\nexport function * getTopicIterator(_topicList, _level) {\r\n    _level || (_level = 0);\r\n    for (const idx in _topicList) {\r\n        const topic = _topicList[idx];\r\n        yield {level: _level, topic};\r\n        if (topic.children) {\r\n            for (const childTopicDesc of getTopicIterator(topic.children, _level + 1)) {\r\n                yield childTopicDesc;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// 从导图结合对象中获取主题迭代器\r\nexport function * getTopicIteratorFromMinds(_minds) {\r\n    for (const idxSheet in _minds) {\r\n        for (const topicDesc of getTopicIterator([_minds[idxSheet].topic])) {\r\n            yield topicDesc;\r\n        }\r\n    }\r\n}\r\n","import * as hostAdapter from \"./hostAdapter\";\r\n\r\nexport default function () {\r\n    return [{\r\n        caption: 'File', \r\n        subItems: hostAdapter.noSpecialHost() ? [{\r\n            caption: 'New&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ctrl+Alt+N',\r\n            fn: this.onNewWorkBook\r\n        }, {\r\n            separate: true\r\n        }, {\r\n            caption: 'Open&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ctrl+O',\r\n            fn: this.onOpen\r\n        }, {\r\n            caption: 'Save&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ctrl+S',\r\n            fn: this.onSave\r\n        }, {\r\n            separate: true\r\n        }, {\r\n            caption: \"Import KM\",\r\n            fn: this.onImportKM\r\n        }, {\r\n            separate: true\r\n        }, {\r\n            caption: 'Export as Markdown',\r\n            fn: this.onExportMarkdown\r\n        }, {\r\n            caption: 'Export as KM',\r\n            fn: this.onExportKM\r\n        }] : [{\r\n            caption: 'New&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ctrl+Alt+N',\r\n            fn: this.onNewWorkBook\r\n        }, {\r\n            separate: true\r\n        }, {\r\n            caption: 'Open&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ctrl+O',\r\n            fn: this.onOpen\r\n        }, {\r\n            caption: 'Save&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ctrl+S',\r\n            fn: this.onSave\r\n        }, {\r\n            caption: 'Save As...',\r\n            fn: this.onSaveAs\r\n        }, {\r\n            separate: true\r\n        }, {\r\n            caption: \"Import KM\",\r\n            fn: this.onImportKM\r\n        }, {\r\n            separate: true\r\n        }, {\r\n            caption: 'Export as Markdown',\r\n            fn: this.onExportMarkdown\r\n        }, {\r\n            caption: 'Export as KM',\r\n            fn: this.onExportKM\r\n        }]\r\n    }, {\r\n        caption: 'Pages',\r\n        subItems: [{\r\n            caption: 'Create a Empty Page',\r\n            fn: this.onNewPage\r\n        }, {\r\n            caption: 'Rename Current Page',\r\n            fn: this.onRenamePage\r\n        }, {\r\n            caption: 'Delete Current Page',\r\n            fn: this.onDeletePage\r\n        }]\r\n    }, {\r\n        separate: true\r\n    }, {\r\n        svg: {\r\n            width: 17,\r\n            height: 17,\r\n            html: '<path d=\"M2 13H15V4H5M5 3L3.5 4L5 5V3L3.5 4\" />'\r\n        },\r\n        caption: 'Undo (Ctrl+Z)',\r\n        fn: this.onUndo,\r\n    }, {\r\n        svg: {\r\n            width: 17,\r\n            height: 17,\r\n            html: '<path d=\"M15 13H2V4H13M12 3L13.5 4L12 5V3L13.5 4\" />'\r\n        },\r\n        caption: 'Redo (Ctrl+Y)',\r\n        fn: this.onRedo\r\n    }, {\r\n        svg: {\r\n            width: 17,\r\n            height: 17,\r\n            html: '<path d=\"M13 6V2H3V15H10M13 10A3 3 0 1 1 7 10A3 3 0 1 1 13 10M12 12L15 15M5 5H11\" />'\r\n        },\r\n        caption: 'Search',\r\n        fn: this.onStartSearch\r\n    }, {\r\n        separate: true\r\n    }, {\r\n        svg: {\r\n            width: 26,\r\n            height: 17,\r\n            html: '<path d=\"M2 3H17V7H2V3H4M2.5 12H7.5M5 9.5V14.5M10 7V12H13M14 10H25V14H13V10H17\" />'\r\n        },\r\n        caption: 'Add Child (Ctrl+Down)',\r\n        fn: () => this.execCmd('addSubTopic')\r\n    }, {\r\n        svg: {\r\n            width: 26,\r\n            height: 17,\r\n            html: '<path d=\"M1 8H7M4 5V11M10 5H25V11H10V5H17M10 8H25\" />'\r\n        },\r\n        caption: 'Add Sibling (Ctrl+Right)',\r\n        notForRoot: true,\r\n        fn: () => this.execCmd('addSiblingTopic')\r\n    }, {\r\n        svg: {\r\n            width: 26,\r\n            height: 17,\r\n            html: '<path d=\"M18 8V5H3V10H14M15 8L23 13M23 8L15 13\" />'\r\n        },\r\n        caption: 'Remove',\r\n        notForRoot: true,\r\n        fn: () => this.execCmd('deleteTopic')\r\n    }, {\r\n        caption: 'Properties:'\r\n    }, {\r\n        svg: {\r\n            width: 17,\r\n            height: 17,\r\n            viewBox: \"0 0 22 22\",\r\n            html: '<path d=\"M3 10.5L7 5H19V17H7L3 10.5M6 10.5A2 2 0 1 1 10 10.5A2 2 0 1 1 6 10.5\" />'\r\n        },\r\n        caption: 'Labels',\r\n        fn: () => this.invokePropertyEditor('labels')\r\n    }, {\r\n        svg: {\r\n            width: 17,\r\n            height: 17,\r\n            viewBox: \"0 0 22 22\",\r\n            html: '<path d=\"M3 19V4H13V13H3M13 8H19V16H10V13\" />'\r\n        },\r\n        caption: 'Markers',\r\n        fn: () => this.invokePropertyEditor('markers')\r\n    }, {\r\n        svg: {\r\n            width: 17,\r\n            height: 17,\r\n            viewBox: \"0 0 22 22\",\r\n            html: '<path d=\"M3 1H13L18 6V20H3V1M13 1V6H18M6 4H10M6 7H10M6 10H15M6 13H15M6 16H13\" />'\r\n        },\r\n        caption: 'Notes',\r\n        fn: () => this.invokePropertyEditor('notes')\r\n    }, {\r\n        svg: {\r\n            width: 17,\r\n            height: 17,\r\n            viewBox: \"0 0 22 22\",\r\n            html: '<path d=\"M3 5H18V17H3V5M3 16L7 10L10 13L13 7L18 13\" />'\r\n        },\r\n        caption: 'Image',\r\n        fn: () => this.$refs.mindView.invokeImagePicker()\r\n    }, {\r\n        svg: {\r\n            width: 17,\r\n            height: 17,\r\n            viewBox: \"0 0 22 22\",\r\n            html: '<path d=\"M9 7L11 5A2 2 0 0 1 15 9L13 11M7 9L5 11A2 2 0 0 0 9 15L11 13M7 13L13 7\" />'\r\n        },\r\n        caption: 'link or attachment',\r\n        fn: () => this.$refs.mindView.invokePropertyEditor('href')\r\n    }, {\r\n        separate: true\r\n    }, {\r\n        caption: 'Fold',\r\n        subItems: [{\r\n            caption: 'No fold',\r\n            fn: () => this.$refs.mindView.mind.fold(0)\r\n        }, {\r\n            separate: true\r\n        }, {\r\n            caption: 'Fold to level 1',\r\n            fn: () => this.$refs.mindView.mind.fold(1)\r\n        }, {\r\n            caption: 'Fold to level 2',\r\n            fn: () => this.$refs.mindView.mind.fold(2)\r\n        }, {\r\n            caption: 'Fold to level 3',\r\n            fn: () => this.$refs.mindView.mind.fold(3)\r\n        }]\r\n    }/*, {\r\n        caption: 'Theme',\r\n        subItems: [{\r\n\r\n        }]\r\n    }*/];\r\n}","<template>\r\n    <div class=\"main\">\r\n        <mind-svg-view ref=\"mindView\" view-class=\"mind-view-class\" \r\n            :mind-config=\"{draggable: true}\" attachment-path=\"resources\"\r\n            :show-edit-tools=\"!showMenuContent\"\r\n            @focus-topic-changed=\"onFocusTopicChanged\"\r\n            @blur-float-panel=\"onBlurFloatPanel\"\r\n            @history-changed=\"onHistoryChanged\"\r\n            :key-action-map=\"{\r\n                    'ctrl+alt+n': onNewWorkBook, \r\n                    'ctrl+o': onOpen,\r\n                    'ctrl+s': onSave,\r\n                    'ctrl+down': 'addSubTopic', \r\n                    'ctrl+right': 'addSiblingTopic',\r\n                    'up': 'selectParent',\r\n                    'down': 'selectChild',\r\n                    'left': 'selectPreviousSibling',\r\n                    'right': 'selectNextSibling',\r\n                    'enter': 'editTopic',\r\n                    'delete': 'deleteTopic',\r\n                    'ctrl+z': onUndo,\r\n                    'ctrl+y': onRedo,\r\n                    'f3': onStartSearch\r\n            }\" />\r\n        <floatToolbar ref=\"toolbar\" @handler-click=\"showMenuContent = !showMenuContent\" :show-content=\"showMenuContent\" \r\n            :items=\"menuContent\">\r\n            <div class=\"mind-input-panel\" v-if=\"requestInput\">\r\n                <span>{{_T(requestInput.caption)}}</span>\r\n                <input :placeholder=\"_T(requestInput.tip)\" v-model=\"requestInput.value\" @keydown.enter.stop=\"onInputConfirm\" @keydown.esc.stop=\"onInputCancel\" />\r\n                <button class=\"mind-input-button\" @click=\"onInputConfirm\">{{_T(\"Confirm\")}}</button>\r\n                <button class=\"mind-input-button\" @click=\"onInputCancel\">{{_T(\"Cancel\")}}</button>\r\n            </div>\r\n            <div class=\"mind-input-panel\" v-if=\"requestSearch\">\r\n                <span>{{_T('search:')}}</span>\r\n                <input :placeholder=\"_T('Input search information')\" v-model=\"requestSearch.value\" @input=\"onSearchInputChange\"  @keydown.enter.stop=\"onSearchNext\" @keydown.esc.stop=\"onSearchCancel\" />\r\n                <button class=\"mind-input-button\" @click=\"onSearchNext\">{{_T(\"Next\")}}</button>\r\n                <button class=\"mind-input-button\" @click=\"onSearchPrev\">{{_T(\"Prev\")}}</button>\r\n                <button class=\"mind-input-button\" @click=\"onSearchCancel\">{{_T(\"Cancel\")}}</button>\r\n            </div>\r\n        </floatToolbar>\r\n    </div>\r\n</template>\r\n\r\n<style>\r\n    .main {\r\n        font-family: Avenir, Helvetica, Arial, sans-serif;\r\n        -webkit-font-smoothing: antialiased;\r\n        -moz-osx-font-smoothing: grayscale;\r\n        text-align: center;\r\n        color: #2c3e50;\r\n        margin: 0px;\r\n        padding: 0px;\r\n        position: absolute;\r\n        top: 0px;\r\n        bottom: 0px;\r\n        left: 0px;\r\n        right: 0px;\r\n        background-color: #fff;\r\n        -webkit-touch-callout: none; /* iOS Safari */\r\n        -webkit-user-select: none; /* Chrome/Safari/Opera */\r\n        -khtml-user-select: none; /* Konqueror */\r\n        -moz-user-select: none; /* Firefox */\r\n        -ms-user-select: none; /* Internet Explorer/Edge */\r\n        user-select: none; /* Non-prefixed version, currently not supported by any browser */\r\n    }\r\n\r\n    .mind-view-class {\r\n        position: absolute !important;\r\n        left: 0px;\r\n        right: 0px;\r\n        top: 0px;\r\n        bottom: 0px;\r\n        border: 0px;\r\n    }\r\n\r\n    .mind-input-panel {\r\n        position: absolute;\r\n        padding: 6px;\r\n        border: 0px;\r\n        margin: 6px 0px 0px 0px;\r\n        background-color: rgba(255, 255, 255, 0.9);\r\n        border-radius: 6px;\r\n        box-shadow: 0px 0px 6px rgba(128, 128, 128, 0.6);\r\n        top: 100%;\r\n        left: 0px;\r\n        display: flex;\r\n        flex-direction: row;\r\n        flex-wrap: nowrap;\r\n        align-items: center;\r\n    }\r\n\r\n    .mind-input-panel input {\r\n        outline: none;\r\n        font-size: 13px;\r\n    }\r\n\r\n    .mind-input-panel span {\r\n        padding: 0px 6px 0px 0px;\r\n    }\r\n\r\n    .mind-input-button {\r\n        border: 1px solid #ccc;\r\n        border-radius: 3px;\r\n        background: linear-gradient(to top, rgba(226, 226, 226, 0.5) 26%,rgba(246, 246, 246, 0.5) 90%,rgba(255, 255, 255, 0.9) 100%);\r\n        color: #333;\r\n        outline: none;\r\n        font-size: 13px;\r\n        margin: 0px 0px 0px 3px;\r\n    }\r\n\r\n    .mind-input-button:hover {\r\n        border-color: #09f;\r\n        background: linear-gradient(to top, rgba(0, 117, 255, 0.9) 26%,rgba(0, 157, 255, 0.9) 90%,rgba(0, 170, 255, 0.9) 100%);\r\n        color: #fff;\r\n    }\r\n\r\n    .mind-input-button:active {\r\n        border-color: #09f;\r\n        background: linear-gradient(to top, rgba(0, 170, 255, 0.9) 26%,rgba(0, 157, 255, 0.9) 90%,rgba(0, 117, 255, 0.9) 100%);\r\n        color: #fff;\r\n    }\r\n\r\n    .mind-input-button-prime {\r\n        border-color: #09f;\r\n        color: #09f;\r\n    }\r\n\r\n    .mind-input-button-danger {\r\n        border-color: #f00;\r\n        color: #f00;\r\n    }\r\n\r\n    .mind-input-button-danger:hover {\r\n        border-color: #f00;\r\n        background: linear-gradient(to top, rgba(217, 0, 0, 0.9) 26%,rgba(255, 0, 0, 0.9) 90%,rgba(255, 117, 117, 0.9) 100%);\r\n    }\r\n\r\n    .mind-input-button-danger:active {\r\n        border-color: #f00;\r\n        background: linear-gradient(to top, rgba(255, 117, 117, 0.9) 26%,rgba(255, 0, 0, 0.9) 90%,rgba(217, 0, 0, 0.9) 100%);\r\n    }\r\n\r\n</style>\r\n\r\n<script>\r\n    import { Constants } from \"mind.svg.js\";\r\n    import { translate, utility } from \"mind.svg.vue\";\r\n    import floatToolbar from \"./components/floatToolbar\";\r\n    import * as xmind from \"./js/xmind\";\r\n    import * as fileFormat from \"./js/fileFormator\";\r\n    import toolsInfo from \"./js/toolsInfo\";\r\n    import * as hostAdapter from \"./js/hostAdapter\";\r\n\r\n    export default {\r\n        name: 'App',\r\n        components: {\r\n            floatToolbar\r\n        },\r\n        data() {\r\n            return {\r\n                showMenuContent: true,\r\n                mind: undefined,\r\n                currentPage: undefined,\r\n                menuContent: toolsInfo.call(this),\r\n                requestInput: undefined,\r\n                requestSearch: undefined\r\n            }\r\n        },\r\n        methods: {\r\n            _T: translate.get.bind(translate),\r\n            /**\r\n             * 整理页面列表\r\n             */\r\n            pickPageList() {\r\n                const listMenu = this.menuContent[1].subItems;\r\n                listMenu.splice(3);\r\n                const mind = this.mind;\r\n                if (mind) {\r\n                    (mind.length > 0) && listMenu.push({separate:true});\r\n                    for (const index in mind) {\r\n                        const page = mind[index];\r\n                        listMenu.push({\r\n                            pageID: page.id,\r\n                            caption: page.title,\r\n                            fn: () => { this.onSwitchPage(index) }\r\n                        });\r\n                    }\r\n                }\r\n            },\r\n            /**\r\n             * 识别并标记菜单中的编辑按钮是否可用\r\n             */\r\n            markMenuEditable(_topic) {\r\n                for (let i = this.menuContent.length - 3; i >=7 ; i--) {\r\n                    if (_topic) {\r\n                        this.menuContent[i].disable = (false || (this.menuContent[i].notForRoot && (_topic.level <= 0)));\r\n                    } else {\r\n                        this.menuContent[i].disable = true;\r\n                    }\r\n                }\r\n                this.$refs.toolbar.$forceUpdate();\r\n            },\r\n            /**\r\n             * 保存当前页面的内容到文档缓存中\r\n             */\r\n            saveCurrentPage() {\r\n                if (this.currentPage) {\r\n                    this.currentPage.topic = this.$refs.mindView.mind.data;\r\n                }\r\n            },\r\n            /**\r\n             * 加载附件\r\n             */\r\n            loadAttachments(_attachmentIterator) {\r\n                const attachments = this.$refs.mindView.attachments;\r\n                attachments.clear();\r\n                for (const item of _attachmentIterator) {\r\n                    attachments.item(item.path, item.value);\r\n                }\r\n            },\r\n            /**\r\n             * 清理所有没有被用到的附件\r\n             */\r\n            cleanAttachments(_xmind) {\r\n                _xmind || (_xmind = xmind.createEmpty());\r\n                const attachments = this.$refs.mindView.attachments;\r\n                for (const {topic} of fileFormat.getTopicIteratorFromMinds(this.mind)) {\r\n                    let attachmentItem = undefined;\r\n                    let attachPath = undefined;\r\n                    if (topic.image && String(topic.image.src).startsWith(Constants.ATTACHMENT_LINK_PREFIX)) {\r\n                        attachPath = String(topic.image.src).substr(Constants.ATTACHMENT_LINK_PREFIX.length);\r\n                    }\r\n                    if (topic.href && String(topic.href).startsWith(Constants.ATTACHMENT_LINK_PREFIX)) {\r\n                        attachPath = String(topic.href).substr(Constants.ATTACHMENT_LINK_PREFIX.length);\r\n                    }\r\n                    attachPath && (attachmentItem = attachments.item(attachPath)) && _xmind.setAttachment(attachPath, attachmentItem.data);\r\n                }\r\n                this.loadAttachments(_xmind.attachmentInterator());\r\n                return _xmind;\r\n            },\r\n            /**\r\n             * 响应新建导图文件的菜单命令\r\n             */\r\n            onNewWorkBook() {\r\n                hostAdapter.newFile();\r\n            },\r\n            /**\r\n             * 响应新建页面的菜单命令\r\n             */\r\n            onNewPage() {\r\n                this.saveCurrentPage();\r\n                if (this.mind) {\r\n                    const id = Date.now().toString(16);\r\n                    const page = (this.currentPage = {\r\n                        id,\r\n                        title: `${translate.get(\"page\")}-${id}`,\r\n                        topic: {\r\n                            title: translate.get(\"Center Topic\")\r\n                        }\r\n                    });\r\n                    this.mind.push(page);\r\n                    this.pickPageList();\r\n                    this.loadPage(page);\r\n                }\r\n            },\r\n            /**\r\n             * 响应重命名页面的菜单命令\r\n             */\r\n            onRenamePage() {\r\n                this.closeAllPanel();\r\n                this.showInputPanel(\"Rename Page:\", \"Input page name\", this.currentPage && this.currentPage.title, (_name) => {\r\n                    _name = String(_name).trim();\r\n                    if (_name) {\r\n                        this.saveCurrentPage();\r\n                        if (this.currentPage && _name) {\r\n                            this.currentPage.title = _name;\r\n                            this.pickPageList();\r\n                            this.loadPage(this.currentPage);\r\n                        }\r\n                    } else {\r\n                        this.$tip.error(translate.get(\"Can not rename a page as empty title!\"));\r\n                    }\r\n                });\r\n            },\r\n            /**\r\n             * 响应删除页面的菜单命令\r\n             */\r\n            async onDeletePage() {\r\n                const confirm = await this.$tip.confirm(undefined, {\r\n                    html: `${translate.get(\"The deleted page can not be restored!\")}<br/>${translate.get(\"Are you sure to continue?\")}`\r\n                });\r\n                if ((confirm === 0) && this.currentPage && this.mind) {\r\n                    const title = this.currentPage.title;\r\n                    let index = this.mind.indexOf(this.currentPage);\r\n                    if (index >= 0) {\r\n                        this.mind.splice(index, 1);\r\n                    }\r\n                    this.pickPageList();\r\n                    if (this.mind.length <= 0) {\r\n                        this.onNewPage();\r\n                    } else {\r\n                        (index >= this.mind.length) && (index -= 1);\r\n                        this.onSwitchPage(index);\r\n                    }\r\n                    this.$forceUpdate();\r\n                    this.$tip.info(`[${title}] ` + translate.get(\"has been deleted!\"));\r\n                }\r\n            },\r\n            /**\r\n             * 响应打开导图文件的菜单命令\r\n             */\r\n            async onOpen() {\r\n                const file = await hostAdapter.openFile();\r\n                if (file) {\r\n                    const confirm = await this.$tip.confirm(undefined, {\r\n                        html: `${translate.get(\"Open a mindmap file will cover the current mindmap if it has not been saved.\")}<br/>${translate.get(\"Are you sure to continue?\")}`\r\n                    });\r\n                    if (confirm === 0) {\r\n                    const xmindfile = await xmind.load(file);\r\n                    const mind = (this.mind = fileFormat.fromXMind(xmindfile));\r\n                    this.loadAttachments(xmindfile.attachmentInterator());\r\n                    this.pickPageList();\r\n                    this.loadPage(mind[0]);\r\n                    }\r\n                }\r\n            },\r\n            /**\r\n             * 响应保存当前导图文件的菜单命令\r\n             */\r\n            async onSave() {\r\n                this.saveCurrentPage();\r\n                const xmindFile = this.cleanAttachments();\r\n                fileFormat.toXMind(this.mind, xmindFile);\r\n                const file = await xmind.save(xmindFile);\r\n                if (file) {\r\n                    hostAdapter.saveFile(file);\r\n                }\r\n            },\r\n            /**\r\n             * 响应从UI工具栏触发将当前导图另存为其他文件的命令\r\n             */\r\n            async onSaveAs() {\r\n                this.saveCurrentPage();\r\n                const xmindFile = this.cleanAttachments();\r\n                fileFormat.toXMind(this.mind, xmindFile);\r\n                const file = await xmind.save(xmindFile);\r\n                if (file) {\r\n                    hostAdapter.saveFileAs(file);\r\n                }\r\n            },\r\n            /**\r\n             * 响应从VSCode的菜单触发的将当前导图另存为其他文件的命令\r\n             */\r\n            async onSaveAsInvokeByHost(_event) {\r\n                this.saveCurrentPage();\r\n                const xmindFile = this.cleanAttachments();\r\n                fileFormat.toXMind(this.mind, xmindFile);\r\n                const file = await xmind.save(xmindFile);\r\n                if (file) {\r\n                    hostAdapter.saveFile(file, {filePath: _event.detail.filePath});\r\n                }\r\n            },\r\n            /**\r\n             * 响应导图KM文件为页面的菜单命令\r\n             */\r\n            async onImportKM() {\r\n                const file = await utility.pickFile(\".km\");\r\n                if (file) {\r\n                    const page = await fileFormat.importKittyMind(file);\r\n                    if (page) {\r\n                        this.mind.push(page);\r\n                        this.pickPageList();\r\n                        this.loadPage(page);\r\n                    }\r\n                }\r\n            },\r\n            /**\r\n             * 响应导出当前页面为KM文件的菜单命令\r\n             */\r\n            onExportKM() {\r\n                this.saveCurrentPage();\r\n                if (this.currentPage) {\r\n                    const blob = fileFormat.exportKittyMind(this.currentPage);\r\n                    hostAdapter.saveToFile(blob, translate.get(\"Kitty Mind(*.km)\"), \"km\", false);\r\n                }\r\n            },\r\n            /**\r\n             * 响应导出当前页面为MD文件的菜单命令\r\n             */\r\n            onExportMarkdown() {\r\n                const content = [];\r\n                const attachment = []; \r\n                const imageTip = translate.get(\"Image of topic\");\r\n                const linkTip = translate.get(\"Link to reference\");\r\n                const attachments = this.$refs.mindView.attachments;\r\n                let attachmentTick = 0;\r\n                let promise = new Promise(r => r());\r\n                this.saveCurrentPage();\r\n                for (const {level, topic} of fileFormat.getTopicIteratorFromMinds(this.mind)) {\r\n                    content.push(`${\"#\".repeat(level + 1)} ${topic.title}`);\r\n                    if (topic.notes) {\r\n                        content.push(String(topic.notes).trim());\r\n                    }\r\n                    if (topic.href) {\r\n                        (!String(topic.href).startsWith(Constants.ATTACHMENT_LINK_PREFIX)) \r\n                            && content.push(`[${linkTip}](${topic.href})`);\r\n                    }\r\n                    if (topic.labels || topic.markers) {\r\n                        content.push(\"```\");\r\n                        if (topic.labels instanceof Array) {\r\n                            content.push(topic.labels.join(\" \"));\r\n                        }\r\n                        if (topic.markers) {\r\n                            for (const markerID in topic.markers) {\r\n                                const markerValue = topic.markers[markerID];\r\n                                content.push(`${translate.get(markerID)}: ${translate.get(markerValue)}`);\r\n                            }\r\n                        }\r\n                        content.push(\"```\");\r\n                    }\r\n                    if (topic.image) {\r\n                        if (String(topic.image.src).startsWith(Constants.ATTACHMENT_LINK_PREFIX)) {\r\n                            const imageID = `image${attachmentTick++}`;\r\n                            content.push(`![${imageTip}][${imageID}]`);\r\n                            const attachPath = String(topic.image.src).substr(Constants.ATTACHMENT_LINK_PREFIX.length);\r\n                            promise = promise.then(() => new Promise(resolve => {\r\n                                let mime = attachPath.toLowerCase();\r\n                                mime = mime.endsWith(\".png\") ? \"image/png;\" : (mime.endsWith(\".gif\") ? \"image/gif;\" : (mime.endsWith(\".ico\") ? \"image/x-icon;\" : \"image/jpeg;\"));\r\n                                const blob = attachments.item(attachPath).data;\r\n                                const reader = new FileReader();\r\n                                reader.onload = (e) => attachment.push(`[${imageID}]:${String(e.target.result).replace(\"application/octet-stream;\", mime)}`);\r\n                                reader.onloadend = () => resolve();\r\n                                reader.readAsDataURL(blob);\r\n                            }));\r\n                        } else {\r\n                            content.push(`![${imageTip}](${topic.image.src} \"${imageTip}\")`);\r\n                        }\r\n                    }\r\n                }\r\n                promise.finally(() => {\r\n                    const mdBlob = new Blob([`${content.join(\"\\r\\n\\r\\n\")}\\r\\n\\r\\n${attachment.join(\"\\r\\n\\r\\n\")}`]);\r\n                    hostAdapter.saveToFile(mdBlob, translate.get(\"Markdown File(*.md)\"), \"md\", true);\r\n                });\r\n            },\r\n            /**\r\n             * 当焦点主题发生变化的时候更新菜单中编辑项的可用性\r\n             */\r\n            onFocusTopicChanged(_topic) {\r\n                this.markMenuEditable(_topic);\r\n            },\r\n            /**\r\n             * 当视图要求关闭所有浮动面板时, 对自定义的浮动面板进行关闭处理\r\n             */\r\n            onBlurFloatPanel() {\r\n                this.closeInputPanel();\r\n            },\r\n            /**\r\n             * 当编辑历史发生变化的时候, 更新UNDO/REDO按钮的可用性\r\n             */\r\n            onHistoryChanged(_count) {\r\n                this.menuContent[3].disable = (_count.undo <= 0);\r\n                this.menuContent[4].disable = (_count.redo <= 0);\r\n                this.$refs.toolbar.$forceUpdate();\r\n            },\r\n            /**\r\n             * 响应切换页面的菜单命令\r\n             * @param {Number} _index 页面在页面集合中的索引号\r\n             */\r\n            onSwitchPage(_index) {\r\n                const mind = this.mind;\r\n                this.saveCurrentPage();\r\n                mind && (mind.length > _index) && (_index >= 0) && this.loadPage(mind[_index]);\r\n            },\r\n            /**\r\n             * 响应撤销前一编辑动作的菜单命令\r\n             */\r\n            onUndo() {\r\n                this.$refs.mindView.history.undo();\r\n                this.onHistoryChanged(this.$refs.mindView.history.count);\r\n            },\r\n            /**\r\n             * 响应重做被撤销的编辑动作的菜单命令\r\n             */\r\n            onRedo() {\r\n                this.$refs.mindView.history.redo();\r\n                this.onHistoryChanged(this.$refs.mindView.history.count);\r\n            },\r\n            /**\r\n             * 载入一个具体的页面\r\n             * @param {Object} _page 页面对象\r\n             */\r\n            loadPage(_page) {\r\n                if (_page) {\r\n                    this.currentPage = _page;\r\n                    this.cleanAttachments();\r\n                    this.$refs.mindView.showMind(_page.topic);\r\n                    this.closeAllPanel();\r\n                    const listMenu = this.menuContent[1].subItems;\r\n                    const pageCount = listMenu.length;\r\n                    for (let index = 4; index < pageCount; index++) {\r\n                        listMenu[index].style = ((listMenu[index].pageID === _page.id) ? {\r\n                            fontWeight: \"800\",\r\n                        } : undefined);\r\n                    }\r\n                    this.markMenuEditable();\r\n                    this.$forceUpdate();\r\n                }\r\n            },\r\n            /**\r\n             * 执行视图组件的内置命令\r\n             */\r\n            execCmd(_cmd) {\r\n                const fn = this.$refs.mindView[_cmd];\r\n                (typeof fn === \"function\") && fn();\r\n            },\r\n            /**\r\n             * 调用属性编辑器\r\n             * @param {String} _id 属性ID名，比如labels、notes等\r\n             */\r\n            invokePropertyEditor(_id) {\r\n                const view = this.$refs.mindView;\r\n                view && (view.blurFloatPanel(), view.invokePropertyEditor(_id));\r\n            },\r\n            /**\r\n             * 关闭所有面板（不仅关闭视图的浮动面板，也关闭查找对话框等不影响编辑和布局的自定义面板）\r\n             */\r\n            closeAllPanel() {\r\n                this.$refs.mindView.blurFloatPanel();\r\n                this.requestSearch = undefined;\r\n            },\r\n            /**\r\n             * 显示输入信息面板\r\n             */\r\n            showInputPanel(_caption, _tip, _value, _fnConfirm, _fnCancel) {\r\n                this.requestInput = {\r\n                    caption: _caption,\r\n                    tip: _tip, \r\n                    value: _value,\r\n                    confirm: _fnConfirm,\r\n                    cancel: _fnCancel\r\n                }\r\n            },\r\n            /**\r\n             * 关闭输入面板\r\n             */\r\n            closeInputPanel() {\r\n                this.requestInput = undefined;\r\n            },\r\n            /**\r\n             * 输入面板中的输入信息被确认提交\r\n             */\r\n            onInputConfirm() {\r\n                const requestInput = this.requestInput;\r\n                this.requestInput = undefined;\r\n                if (requestInput) {\r\n                    const fn = requestInput.confirm;\r\n                    (typeof fn === \"function\") && fn(requestInput.value);\r\n                }\r\n            },\r\n            /**\r\n             * 取消输入面板中的输入动作\r\n             */\r\n            onInputCancel() {\r\n                const requestInput = this.requestInput;\r\n                this.requestInput = undefined;\r\n                if (requestInput) {\r\n                    const fn = requestInput.cancel;\r\n                    (typeof fn === \"function\") && fn(requestInput.value);\r\n                }\r\n            },\r\n            /**\r\n             * 响应启动查找主题项的菜单命令\r\n             */\r\n            onStartSearch() {\r\n                this.closeAllPanel();\r\n                this.requestSearch = {\r\n                    value: \"\",\r\n                    iterator: undefined,\r\n                    record: []\r\n                };\r\n            },\r\n            /**\r\n             * 响应查找下一个主题项的命令\r\n             */\r\n            onSearchNext() {\r\n                const requestSearch = this.requestSearch;\r\n                if (requestSearch && requestSearch.value) {\r\n                    requestSearch.iterator || (requestSearch.iterator = this.$refs.mindView.mind.getTopicIterator(), requestSearch.record = []);\r\n                    let current;\r\n                    let found = false;\r\n                    while (!found && !(current = requestSearch.iterator.next()).done) {\r\n                        const data = current.value.topicData();\r\n                        for (const itemName in data) {\r\n                            if (String(data[itemName]).match(requestSearch.value)) {\r\n                                found = true;\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (found) {\r\n                        const topic = current.value;\r\n                        requestSearch.record.push(topic);\r\n                        topic.focus(true);\r\n                        this.$refs.mindView.toCenter(topic);\r\n                    } else if (current.done) {\r\n                        this.$tip.warn(translate.get(\"Searching operation have reached the end of the current mindmap\"));\r\n                        requestSearch.iterator = undefined;\r\n                    }\r\n                }\r\n            },\r\n            /**\r\n             * 响应查找上一个主题项的命令\r\n             */\r\n            onSearchPrev() {\r\n                const requestSearch = this.requestSearch;\r\n                const record = requestSearch && requestSearch.record;\r\n                if (record && record.length > 1) {\r\n                    let prev;\r\n                    record.pop();\r\n                    while ((prev = record.pop()) !== undefined) {\r\n                        const newIterator = this.$refs.mindView.mind.getTopicIterator();\r\n                        let current;\r\n                        while (!(current = newIterator.next()).done) {\r\n                            if (current.value.isSame(prev)) {\r\n                                prev.focus(true);\r\n                                this.$refs.mindView.toCenter(prev);\r\n                                record.push(prev);\r\n                                requestSearch.iterator = newIterator;\r\n                                break;\r\n                            }\r\n                        }\r\n                        if (current && !current.done) {\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            /**\r\n             * 当查找对话框的内容发生变化, 则重置查找迭代器\r\n             */\r\n            onSearchInputChange() {\r\n                if (this.requestSearch) {\r\n                    this.requestSearch.record = [];\r\n                    this.requestSearch.iterator = this.$refs.mindView.mind.getTopicIterator();\r\n                }\r\n            },\r\n            /**\r\n             * 响应取消查找的命令\r\n             */\r\n            onSearchCancel() {\r\n                this.closeAllPanel();\r\n            }\r\n        },\r\n        mounted() {\r\n            // 启动时监听由VSCode宿主发来的保存和另存为命令\r\n            window.addEventListener(\"vscode.notify.save\", this.onSave.bind(this));\r\n            window.addEventListener(\"vscode.notify.saveAs\", this.onSaveAsInvokeByHost.bind(this));\r\n            // 由于VUE组件挂载的时候, 部分数据未就绪, 所以在下一节拍中进行初始导图内容加载的处理\r\n            this.$nextTick(async () => {\r\n                let file = await hostAdapter.loadCurrentFile();\r\n                if (file) {\r\n                    // VSCode宿主存在且有标记存在打开的文件, 则加载对应文件\r\n                    const xmindfile = await xmind.load(file);\r\n                    const mind = (this.mind = fileFormat.fromXMind(xmindfile));\r\n                    this.loadAttachments(xmindfile.attachmentInterator());\r\n                    this.pickPageList();\r\n                    this.loadPage(mind[0]);\r\n                } else {\r\n                    // 没有标记打开的文件时, 则初始化一个空的导图\r\n                    this.$refs.mindView.attachments.clear();\r\n                    this.mind = [];\r\n                    this.onNewPage();\r\n                }\r\n            });\r\n        }\r\n    }\r\n</script>\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=e9322d3e&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<style>\r\n    .nano-tip-bg-box {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n        margin: 6px;\r\n        background-color: transparent;\r\n        border: 0px;\r\n        z-index: 999;\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: center;\r\n        align-items: center;\r\n        font-size: 10px;\r\n        -webkit-touch-callout: none; /* iOS Safari */\r\n        -webkit-user-select: none; /* Chrome/Safari/Opera */\r\n        -khtml-user-select: none; /* Konqueror */\r\n        -moz-user-select: none; /* Firefox */\r\n        -ms-user-select: none; /* Internet Explorer/Edge */\r\n        user-select: none; /* Non-prefixed version, currently not supported by any browser */\r\n    }\r\n\r\n    .nano-tip-content-box {\r\n        padding: 6px;\r\n        margin: 3px 0px;\r\n        background-color: rgba(255, 255, 255, 0.9);\r\n        border-radius: 6px;\r\n        box-shadow: 0px 3px 6px rgba(128, 128, 128, 0.9);\r\n        border: 0px;\r\n        color: #333;\r\n        display: flex;\r\n        flex-direction: row;\r\n        justify-content: center;\r\n        align-items: center;\r\n    }\r\n\r\n    .nano-tip-icon {\r\n        width: 16px;\r\n        height: 16px;\r\n        margin: 0px 6px 0px 0px;\r\n    }\r\n\r\n    .nano-tip-icon-flag {\r\n        fill: #fff;\r\n        stroke: #fff;\r\n        stroke-width: 1.5;\r\n    }\r\n\r\n    .nano-confirm-dlg-bg {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        margin: 0px;\r\n        padding: 0px;\r\n        background-color: rgba(128, 128, 128, 0.6);\r\n        border: 0px;\r\n        z-index: 999;\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: center;\r\n        align-items: center;\r\n        font-size: 13px;\r\n        -webkit-touch-callout: none; /* iOS Safari */\r\n        -webkit-user-select: none; /* Chrome/Safari/Opera */\r\n        -khtml-user-select: none; /* Konqueror */\r\n        -moz-user-select: none; /* Firefox */\r\n        -ms-user-select: none; /* Internet Explorer/Edge */\r\n        user-select: none; /* Non-prefixed version, currently not supported by any browser */\r\n    }\r\n\r\n    .nano-confirm-dlg {\r\n        padding: 6px;\r\n        margin: 0px;\r\n        background-color: rgba(255, 255, 255, 0.9);\r\n        border-radius: 6px;\r\n        box-shadow: 0px 3px 6px rgba(128, 128, 128, 0.9);\r\n        border: 0px;\r\n        color: #333;\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: center;\r\n        align-items: center;\r\n    }\r\n\r\n    .nano-confirm-dlg-content {\r\n        margin: 3px 0px;\r\n        padding: 0px;\r\n        border: 0px;\r\n        background-color: transparent;\r\n        display: flex;\r\n        flex-direction: row;\r\n        justify-content: center;\r\n        align-items: center;\r\n        min-width: 170px;\r\n        min-height: 57px;\r\n    }\r\n\r\n    .nano-confirm-dlg-buttons-bar {\r\n        margin: 3px 0px;\r\n        padding: 0px;\r\n        border: 0px;\r\n        background-color: transparent;\r\n        display: flex;\r\n        flex-direction: row;\r\n        justify-content: flex-end;\r\n        align-items: center;\r\n        width: 100%;\r\n    }\r\n\r\n    .nano-confirm-dlg-button {\r\n        border: 1px solid #ccc;\r\n        border-radius: 3px;\r\n        background: linear-gradient(to top, rgba(226, 226, 226, 0.5) 26%,rgba(246, 246, 246, 0.5) 90%,rgba(255, 255, 255, 0.9) 100%);\r\n        color: #333;\r\n        outline: none;\r\n        font-size: 13px;\r\n        padding: 6px;\r\n        margin: 0px 0px 0px 3px;\r\n        min-width: 66px;\r\n    }\r\n\r\n    .nano-confirm-dlg-button:hover {\r\n        border-color: #09f;\r\n        background: linear-gradient(to top, rgba(0, 117, 255, 0.9) 26%,rgba(0, 157, 255, 0.9) 90%,rgba(0, 170, 255, 0.9) 100%);\r\n        color: #fff;\r\n    }\r\n\r\n    .nano-confirm-dlg-button:active {\r\n        border-color: #09f;\r\n        background: linear-gradient(to top, rgba(0, 170, 255, 0.9) 26%,rgba(0, 157, 255, 0.9) 90%,rgba(0, 117, 255, 0.9) 100%);\r\n        color: #fff;\r\n    }\r\n\r\n</style>\r\n\r\n<script>\r\nimport { translate } from \"mind.svg.vue\";\r\n\r\nexport default {\r\n    render() {\r\n        return \"\";\r\n    }\r\n}\r\n\r\n/**\r\n * 确认对话框类\r\n */\r\nclass ConfirmDlg {\r\n    constructor (_msg, _opt, _resolve, _reject) {\r\n        try {\r\n            _opt || (_opt = {});\r\n            _opt.buttons || (_opt.buttons = [translate.get(\"OK\"), translate.get(\"CANCEL\")]);\r\n            if (document.querySelector(\"div.nano-confirm-dlg-bg\")) {\r\n                _reject(\"Another confirm dialog is still running!\");\r\n            } else {\r\n                // Promise方法记录\r\n                this.resolve = _resolve;\r\n                this.reject = _reject;\r\n                // 背景遮罩\r\n                const dlgBg = (this.rootElement = document.createElement(\"div\"));\r\n                dlgBg.setAttribute(\"class\", \"nano-confirm-dlg-bg\");\r\n                dlgBg.addEventListener(\"mousedown\", (e) => {e.stopPropagation(), e.preventDefault()});\r\n                dlgBg.addEventListener(\"keydown\", (e) => {e.stopPropagation(), e.preventDefault()});\r\n                dlgBg.addEventListener(\"touchstart\", (e) => {e.stopPropagation(), e.preventDefault()});\r\n                // 对话框主体\r\n                const dlg = document.createElement(\"div\");\r\n                dlg.setAttribute(\"class\", _opt.class ? `nano-confirm-dlg ${_opt.class}` : \"nano-confirm-dlg\");\r\n                _opt.style && dlg.setAttribute(\"style\", _opt.style);\r\n                dlgBg.appendChild(dlg);\r\n                // 对话框内容\r\n                const content = document.createElement(\"div\");\r\n                content.setAttribute(\"class\", \"nano-confirm-dlg-content\");\r\n                _msg && content.appendChild(document.createTextNode(_msg));\r\n                _opt.html && content.insertAdjacentHTML(\"beforeend\", _opt.html);\r\n                dlg.appendChild(content);\r\n                // 对话框按钮\r\n                const buttonsBar = document.createElement(\"div\");\r\n                buttonsBar.setAttribute(\"class\", \"nano-confirm-dlg-buttons-bar\");\r\n                dlg.appendChild(buttonsBar);\r\n                this.buttons = [];\r\n                for (const idx in _opt.buttons) {\r\n                    const button = document.createElement(\"button\");\r\n                    button.setAttribute(\"class\", \"nano-confirm-dlg-button\");\r\n                    button.appendChild(document.createTextNode(_opt.buttons[idx]));\r\n                    button.addEventListener(\"click\", () => this.onClick(idx));\r\n                    buttonsBar.appendChild(button);\r\n                    this.buttons.push(button);\r\n                }\r\n                // 超时自动化响应\r\n                if ((_opt.timeout > 0) && (_opt.default >= 0) && (_opt.default < this.buttons.length)) {\r\n                    this.timeout = _opt.timeout;\r\n                    const defaultButton = this.buttons[_opt.default];\r\n                    const timeoutUnit = translate.get(\"S\");\r\n                    defaultButton.appendChild(document.createTextNode(`(${parseInt((this.timeout + 999)/1000)}${timeoutUnit})`));\r\n                    this.timer = setInterval(() => this.onTimer(_opt.default, defaultButton, _opt.buttons[_opt.default], timeoutUnit), 1000);\r\n                }\r\n                // 生效\r\n                const body = document.querySelector(\"body\");\r\n                body.appendChild(dlgBg);\r\n            }\r\n        } catch (_err) {\r\n            _reject(_err);\r\n        }\r\n    }\r\n\r\n    onClick(_index) {\r\n        (typeof this.resolve === \"function\") && this.resolve(parseInt(_index));\r\n        this.timer && (clearInterval(this.timer), this.timer = undefined);\r\n        this.rootElement && (this.rootElement.remove(), this.rootElement = undefined);\r\n    }\r\n\r\n    onTimer(_index, _button, _text, _unit) {\r\n        this.timeout -= 1000;\r\n        if (this.timeout > 0) {\r\n            _button.innerHTML = `${_text}(${parseInt((this.timeout + 999)/1000)}${_unit})`;\r\n        } else {\r\n            this.onClick(_index);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * 提示框类\r\n */\r\nclass TipBox {\r\n    constructor (_msg, _icon, _opt) {\r\n        _opt || (_opt = {});\r\n        const body = document.querySelector(\"body\");\r\n        if (!(this.bgDiv = document.querySelector(\"div.nano-tip-bg-box\"))) {\r\n            this.bgDiv = document.createElement(\"div\");\r\n            this.bgDiv.setAttribute(\"class\", \"nano-tip-bg-box\");\r\n            body.appendChild(this.bgDiv);\r\n        }\r\n        const contentDiv = (this.contentDiv = document.createElement(\"div\"));\r\n        contentDiv.setAttribute(\"class\", _opt.class ? `nano-tip-content-box ${_opt.class}` : \"nano-tip-content-box\");\r\n        _icon && contentDiv.insertAdjacentHTML(\"afterbegin\", _icon);\r\n        _msg &&contentDiv.appendChild(document.createTextNode(_msg));\r\n        _opt.style && contentDiv.setAttribute(\"style\", _opt.style);\r\n        _opt.html && contentDiv.insertAdjacentHTML(\"beforeend\", _opt.html);\r\n        this.bgDiv.appendChild(contentDiv);\r\n        (_opt.timeout > 0) && (this.timer = setTimeout(() => {\r\n            this.close()\r\n        }, _opt.timeout));\r\n    }\r\n\r\n    close() {\r\n        this.contentDiv && (this.contentDiv.remove(), this.contentDiv = undefined);\r\n        this.timer && (clearTimeout(this.timer), this.timer = undefined);\r\n        this.bgDiv && (this.bgDiv.children.length <= 0) && this.bgDiv.remove();\r\n        this.bgDiv = undefined;\r\n    }\r\n}\r\n\r\n/**\r\n * 显示自定义提示\r\n * @param {string} _msg 提示文本\r\n * @param {string} _icon 图标元素的HTML\r\n * @param {object} _opt 选项，包括: timeout超时自动关闭的时间, class自定义内容风格类, style自定义内容风格, html自定义html内容\r\n */\r\nfunction showTip(_msg, _icon, _opt) {\r\n    _opt || (_opt = {timeout: 3000});\r\n    return new TipBox(_msg, _icon, _opt);\r\n}\r\n\r\nconst tip = {\r\n    /**\r\n     * 显示完全自定义消息\r\n     */\r\n    custom: showTip,\r\n    /**\r\n     * 显示提示信息\r\n     * @param {string} _msg 提示文本\r\n     * @param {object} _opt 选项，包括: timeout超时自动关闭的时间, class自定义内容风格类, style自定义内容风格, html自定义html内容\r\n     */\r\n    info(_message, _opt) {\r\n        return showTip(_message, \r\n        `<svg class=\"nano-tip-icon\">\r\n            <circle cx=\"8\" cy=\"8\" r=\"8\" stroke=\"none\" fill=\"#09f\"/>\r\n            <path class=\"nano-tip-icon-flag\" d=\"M6 7L8 6V13V7M6 13H10M8 2V4\" />\r\n        </svg>`, \r\n        _opt);\r\n    },\r\n    /**\r\n     * 显示警告信息\r\n     * @param {string} _msg 提示文本\r\n     * @param {object} _opt 选项，包括: timeout超时自动关闭的时间, class自定义内容风格类, style自定义内容风格, html自定义html内容\r\n     */\r\n    warn(_message, _opt) {\r\n        return showTip(_message, \r\n        `<svg class=\"nano-tip-icon\">\r\n            <circle cx=\"8\" cy=\"8\" r=\"8\" stroke=\"none\" fill=\"#fa0\"/>\r\n            <path class=\"nano-tip-icon-flag\" d=\"M8 10L7.5 2.5H8.5L8 10M8 12V14\" />\r\n        </svg>`, \r\n        _opt);\r\n    },\r\n    /**\r\n     * 显示错误信息\r\n     * @param {string} _msg 提示文本\r\n     * @param {object} _opt 选项，包括: timeout超时自动关闭的时间, class自定义内容风格类, style自定义内容风格, html自定义html内容\r\n     */\r\n    error(_message, _opt) {\r\n        return showTip(_message, \r\n        `<svg class=\"nano-tip-icon\">\r\n            <circle cx=\"8\" cy=\"8\" r=\"8\" stroke=\"none\" fill=\"#f00\"/>\r\n            <path class=\"nano-tip-icon-flag\" d=\"M4 4L12 12M12 4L4 12\" />\r\n        </svg>`, \r\n        _opt);\r\n    },\r\n    /**\r\n     * 确认对话框\r\n     * @param {string} _msg 提示文本\r\n     * @param {object} _opt 选项，包括: timeout超时自动关闭的时间, class自定义内容风格类, style自定义内容风格, html自定义html内容, default超时生效时的默认按钮编号, buttons由按钮文字组成的数组\r\n     */\r\n    confirm(_message, _opt) {\r\n        return new Promise((_resolve, _reject) => new ConfirmDlg(_message, _opt, _resolve, _reject));\r\n    }\r\n};\r\n\r\nexport function registry(_vue) {\r\n    _vue.prototype.$tip = tip;\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tipKit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tipKit.vue?vue&type=script&lang=js&\"","var render, staticRenderFns\nimport script from \"./tipKit.vue?vue&type=script&lang=js&\"\nexport * from \"./tipKit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./tipKit.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default {\r\n    \"zh-cn\": require(\"./zh-cn.json\")\r\n}","const DEFAULT_TIMEOUT = 6000;\r\n\r\n/**\r\n * 收到宿主发来的处理结果的消息时的处理函数\r\n * @param {*} _event \r\n */\r\nfunction procResultMessage(_event) {\r\n    this.timerID && (clearTimeout(this.timerID), this.timerID = undefined);\r\n    window.removeEventListener(this.event, this.fn);\r\n    this.resolve(_event.detail);\r\n}\r\n\r\n/**\r\n * 等待宿主消息超时后的处理函数\r\n * @param {*} item \r\n */\r\nfunction waitTimeout(item) {\r\n    window.removeEventListener(item.event, item.fn);\r\n    item.timerID = undefined;\r\n    item.reject();\r\n}\r\n\r\n/**\r\n * VSCode宿主基本功能封装类\r\n */\r\nexport default class VSCodeHost {\r\n    constructor (_host) {\r\n        this.host = _host;\r\n        window.addEventListener('message', this.onMessage.bind(this));\r\n    }\r\n\r\n    /**\r\n     * 收到宿主的消息时的统一分发函数\r\n     * @param {*} _event \r\n     */\r\n    onMessage(_event) {\r\n        const message = _event.data;\r\n        if (message.$return) {\r\n            let customEvent = new CustomEvent(`vscode.${message.$return}`, { detail: message });\r\n            window.dispatchEvent(customEvent);\r\n        } else if (message.$notify) {\r\n            let customEvent = new CustomEvent(`vscode.notify.${message.$notify}`, { detail: message });\r\n            window.dispatchEvent(customEvent);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 向VSCode宿主发送命令\r\n     * @param {String} _cmd 命令\r\n     * @param {Object} _param 命令配套的参数\r\n     */\r\n    send(_cmd, _param) {\r\n        this.host.postMessage(Object.assign({command:_cmd}, _param));\r\n    }\r\n\r\n    /**\r\n     * 启动等待宿主的结果应答\r\n     * @param {String} _type 应答的类型名称\r\n     * @param {Number} _timeout 等待超时时间, 可不传\r\n     */\r\n    waitResult(_type, _timeout) {\r\n        return new Promise((resolve, reject) => {\r\n            let event = `vscode.${_type}`;\r\n            let thisArg = { event, resolve, reject };\r\n            let fn = procResultMessage.bind(thisArg);\r\n            thisArg.fn = fn;\r\n            thisArg.timerID = setTimeout(waitTimeout, _timeout || DEFAULT_TIMEOUT, thisArg);\r\n            window.addEventListener(event, fn, { once: true });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 向宿主发送命令, 并等待结果应答\r\n     * @param {String} _cmd 发送的命令以及等待的结果类型名\r\n     * @param {Object} _param 发送命令附带的参数\r\n     * @param {Number} _timeout 超时时间, 可不传\r\n     */\r\n    sendAndWait(_cmd, _param, _timeout) {\r\n        return new Promise((resolve, reject) => {\r\n            let event = `vscode.${_cmd}`;\r\n            let thisArg = { event, resolve, reject };\r\n            let fn = procResultMessage.bind(thisArg);\r\n            thisArg.fn = fn;\r\n            thisArg.timerID = setTimeout(waitTimeout, _timeout || DEFAULT_TIMEOUT, thisArg);\r\n            window.addEventListener(event, fn, { once: true });\r\n            this.send(_cmd, _param);\r\n        });\r\n    }\r\n}","/* global acquireVsCodeApi:false */\r\n\r\nimport Vue from 'vue'\r\nimport App from './App.vue'\r\nimport { mindSvgView, translate, lang } from \"mind.svg.vue\";\r\nimport \"mind.svg.vue/.lib/mindSvgVue.css\";\r\nimport * as tipKit from \"./components/tipKit\";\r\nimport appLang from \"./lang/lang\";\r\nimport VSCodeHost from \"./js/vscodeHost\";\r\nimport * as hostAdapter from \"./js/hostAdapter\";\r\n\r\nlet promise = new Promise(r => r());\r\n\r\nconst host = (typeof acquireVsCodeApi === \"function\") ? acquireVsCodeApi() : undefined;\r\nconsole.log(host ? \"in vscode mode\" : \"in normal web mode\");\r\n\r\nif (host) {\r\n    // 在VSCode模式中，则初始化宿主适配层，并根据环境设置UI语言\r\n    const vscode = new VSCodeHost(host);\r\n    hostAdapter.setHost(vscode);\r\n    promise = promise.then(() => vscode.sendAndWait(\"getEnv\")).then(env => {\r\n        translate.map(lang[env.language]);\r\n        translate.map(appLang[env.language]);\r\n    });\r\n} else {\r\n    // 不在VSCode模式中，则默认设置UI为中文\r\n    promise = promise.then(() => {\r\n        translate.map(lang[\"zh-cn\"]);\r\n        translate.map(appLang[\"zh-cn\"]);\r\n    });\r\n}\r\n\r\n// 所有初始化结束后，启动VUE应用页面\r\npromise.finally(() => {\r\n    Vue.use(mindSvgView);\r\n\r\n    tipKit.registry(Vue);\r\n\r\n    new Vue({\r\n    render: h => h(App),\r\n    }).$mount('#app')\r\n});\r\n\r\n","/**\r\n * 该模块提供页面运行在不同宿主中时的功能适配处理\r\n */\r\nimport { utility } from \"mind.svg.vue\";\r\n\r\nlet host = undefined;\r\n\r\n/**\r\n * 加载当前文件\r\n */\r\nexport function loadCurrentFile() {\r\n    return host ? host.sendAndWait(\"loadCurrentFile\").then(result => {\r\n        if (result.value) {\r\n            const buffer = Buffer.from(result.value, \"base64\");\r\n            const blob = new Blob([buffer]);\r\n            return blob;\r\n        } else {\r\n            return undefined;\r\n        }\r\n    }) : new Promise(r => r(undefined));\r\n}\r\n\r\n/**\r\n * 保存文件\r\n * @param {Blob} _blob 文件数据的Blob\r\n * @param {*} _params 参数对象, 可不传\r\n */\r\nexport function saveFile(_blob, _params) {\r\n    if (host) {\r\n        const reader = new FileReader();\r\n        reader.onload = (event) => {\r\n            const buffer = Buffer.from(event.target.result);\r\n            host.send(\"saveCurrentFile\", Object.assign({ value: buffer.toString(\"base64\") }, _params));\r\n        };\r\n        reader.readAsArrayBuffer(_blob);\r\n    } else {\r\n        const url = URL.createObjectURL(_blob);\r\n        utility.dynInvokeLink(url, {download: \"*.xmind\"});\r\n        URL.revokeObjectURL(url);\r\n    }\r\n}\r\n\r\n/**\r\n * 将文件另存为其他文件\r\n * @param {Blob} _blob 文件数据的Blob对象\r\n */\r\nexport function saveFileAs(_blob) {\r\n    const reader = new FileReader();\r\n    reader.onload = (event) => {\r\n        const buffer = Buffer.from(event.target.result);\r\n        host.send(\"saveCurrentFileAs\", { value: buffer.toString(\"base64\") });\r\n    };\r\n    reader.readAsArrayBuffer(_blob);\r\n}\r\n\r\n/**\r\n * 将内容存储未一个文件\r\n * @param {Blob} _blob 文件内容的Blob对象\r\n * @param {String} _filterName 要存储的文件的类型说明\r\n * @param {String} _filter 要存储的文件的扩展名\r\n * @param {Boolean} _show true表示保存完文件通知宿主打开这个文件\r\n */\r\nexport function saveToFile(_blob, _filterName, _filter, _show) {\r\n    if (host) {\r\n        const reader = new FileReader();\r\n        reader.onload = (event) => {\r\n            const buffer = Buffer.from(event.target.result);\r\n            host.send(\"saveToFile\", { \r\n                filter: { [_filterName]: [_filter] },\r\n                value: buffer.toString(\"base64\"),\r\n                openAfterSave: _show\r\n            });\r\n        };\r\n        reader.readAsArrayBuffer(_blob);\r\n    } else {\r\n        const url = URL.createObjectURL(_blob);\r\n        utility.dynInvokeLink(url, {download: `*.${_filter}`});\r\n        URL.revokeObjectURL(url);\r\n    }\r\n}\r\n\r\n/**\r\n * 新建导图文件\r\n */\r\nexport function newFile() {\r\n    host ? host.send(\"exec\", { id: \"vsc-nano-mindmap.newMindMap\" })\r\n         : window.open(location.href)\r\n}\r\n\r\n/**\r\n * 打开导图文件\r\n */\r\nexport function openFile() {\r\n    if (host) {\r\n        host.send(\"exec\", { id: \"vsc-nano-mindmap.openMindMap\" });\r\n        return new Promise(r => r(undefined));\r\n    } else {\r\n        return utility.pickFile(\".xmind\");\r\n    }\r\n}\r\n\r\n/**\r\n * 检查是否有VSCode这样的专用宿主存在\r\n */\r\nexport function noSpecialHost() {\r\n    return (host == undefined);\r\n}\r\n\r\n/**\r\n * 设置宿主对象\r\n * @param {*} _host 宿主对象\r\n */\r\nexport function setHost(_host) {\r\n    host = _host;\r\n}","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tipKit.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tipKit.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}